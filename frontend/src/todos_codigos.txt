=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/api/services/notifications.js ===
// frontend/src/app/api/services/notifications.js

/**
 * FunÃ§Ã£o para enviar email de confirmaÃ§Ã£o de pedido para o administrador
 */
export async function sendOrderEmailToAdmin(orderId, orderData, strapiToken) {
  try {
    // Enviar solicitaÃ§Ã£o para o endpoint do Strapi que lidarÃ¡ com o envio de email
    const response = await fetch(
      `${process.env.NEXT_PUBLIC_API_URL}/api/email/send-order-notification`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${strapiToken}`,
        },
        body: JSON.stringify({
          orderId,
          orderData,
        }),
      }
    );

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || "Falha ao enviar notificaÃ§Ã£o de email");
    }

    return await response.json();
  } catch (error) {
    console.error("Erro ao enviar email:", error);
    // NÃ£o lanÃ§amos o erro para nÃ£o interromper o fluxo principal
    return { success: false, error: error.message };
  }
}

/**
 * FunÃ§Ã£o para preparar o link do WhatsApp para o administrador
 */
export function generateWhatsAppLink(orderId, customer, cartItems, total) {
  try {
    // NÃºmero do administrador (com cÃ³digo do paÃ­s e DDD)
    const adminWhatsApp = process.env.ADMIN_WHATSAPP || "5511999999999";

    // Formatar a mensagem para WhatsApp
    const itemsList = cartItems
      .map(
        (item) =>
          `ğŸ”ª *${item.title}* Ã— ${item.quantity}: R$ ${(
            item.price * item.quantity
          ).toFixed(2)}`
      )
      .join("\n");

    // Criando mensagem completa com formataÃ§Ã£o para WhatsApp
    const message =
      `ğŸ”ª *NOVO PEDIDO #${orderId}*\n\n` +
      `*Cliente:* ${customer}\n` +
      `*Data:* ${new Date().toLocaleDateString("pt-BR")}\n\n` +
      `*ITENS DO PEDIDO:*\n${itemsList}\n\n` +
      `*TOTAL:* R$ ${total.toFixed(2)}\n\n` +
      `Acesse o painel admin para mais detalhes.`;

    // URL codificada para abrir diretamente o WhatsApp
    const encodedMessage = encodeURIComponent(message);
    return `https://api.whatsapp.com/send?phone=${adminWhatsApp}&text=${encodedMessage}`;
  } catch (error) {
    console.error("Erro ao gerar link do WhatsApp:", error);
    return null;
  }
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/api/submitOrder/route.js ===
// frontend/src/app/api/submitOrder/route.js
import { NextResponse } from "next/server";
import {
  sendOrderEmailToAdmin,
  generateWhatsAppLink,
} from "../services/notifications";

export async function POST(request) {
  try {
    // 1) LÃª o payload do front
    const { customer, email, phone, address, cartItems } = await request.json();

    // 2) Gera o resumo no formato Blocks em vez de Markdown
    const total = cartItems.reduce(
      (sum, item) => sum + item.price * item.quantity,
      0
    );

    const headerBlock = {
      type: "heading",
      level: 3,
      children: [{ type: "text", text: "Resumo do Pedido", bold: true }],
    };

    // Bloco de informaÃ§Ã£o do cliente
    const customerBlock = {
      type: "paragraph",
      children: [
        { type: "text", text: "ğŸ‘¤ ", italic: true },
        { type: "text", text: "Cliente: ", bold: true },
        { type: "text", text: customer },
      ],
    };

    // CabeÃ§alho da seÃ§Ã£o de itens
    const itemsHeaderBlock = {
      type: "heading",
      level: 4,
      children: [{ type: "text", text: "Itens do Pedido" }],
    };

    // Blocos para cada item com emoji de faca
    const itemBlocks = cartItems.map((item) => {
      return {
        type: "paragraph",
        children: [
          { type: "text", text: "â¡ï¸ " },
          { type: "text", text: item.title, bold: true },
          { type: "text", text: ` Ã— ${item.quantity}`, italic: true },
          { type: "text", text: "\n    " }, // IndentaÃ§Ã£o
          {
            type: "text",
            text: `R$ ${(item.price * item.quantity).toFixed(2)}`,
          },
        ],
      };
    });

    // Bloco para o total estilizado
    const totalBlock = {
      type: "heading",
      level: 5,
      children: [
        { type: "text", text: "Total: ", bold: true },
        { type: "text", text: `R$ ${total.toFixed(2)}` },
      ],
    };

    // Data do pedido
    const dateBlock = {
      type: "paragraph",
      children: [
        { type: "text", text: "ğŸ“… " },
        { type: "text", text: "Data: ", bold: true },
        {
          type: "text",
          text: new Date().toLocaleDateString("pt-BR", {
            day: "2-digit",
            month: "2-digit",
            year: "numeric",
            hour: "2-digit",
            minute: "2-digit",
          }),
        },
      ],
    };

    // Estrutura completa do resumo no formato de blocos
    const resumo = [
      headerBlock,
      customerBlock,
      dateBlock,
      itemsHeaderBlock,
      ...itemBlocks,
      totalBlock,
    ];

    console.log("Resumo gerado:", JSON.stringify(resumo, null, 2));

    // 3) Cria o Pedido, incluindo o campo resumo
    const orderRes = await fetch(
      `${process.env.NEXT_PUBLIC_API_URL}/api/pedidos`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${process.env.STRAPI_API_TOKEN}`,
        },
        body: JSON.stringify({
          data: {
            cliente: customer,
            email: email,
            telefone: phone,
            endereco: {
              rua: address.street,
              bairro: address.neighborhood,
              cidade: address.city,
              estado: address.state,
              numero: address.number,
              complemento: address.complement,
            },
            resumo,
          },
        }),
      }
    );

    if (!orderRes.ok) {
      const err = await orderRes.json();
      console.error("Erro ao criar pedido:", err);
      return NextResponse.json(
        { error: err.error || err.message || "Falha ao criar pedido" },
        { status: orderRes.status }
      );
    }
    const { data: orderData } = await orderRes.json();

    // 4) Cria cada Item do Pedido ligado ao pedido
    const createItem = (item) =>
      fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/item-do-pedidos`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${process.env.STRAPI_API_TOKEN}`,
        },
        body: JSON.stringify({
          data: {
            quantidade: item.quantity,
            preco: item.price,
            produto: parseInt(item.id) + 1,
            pedido: orderData.id,
          },
        }),
      });

    const results = await Promise.all(cartItems.map(createItem));
    const failed = results.find((r) => !r.ok);
    if (failed) {
      const err = await failed.json();
      console.error("Erro ao criar item do pedido:", err);
      return NextResponse.json(
        { error: err.error || err.message || "Falha ao criar item" },
        { status: failed.status }
      );
    }

    try {
      // Preparar dados completos do pedido
      const orderCompleteData = {
        id: orderData.id,
        customer,
        email,
        phone,
        address,
        cartItems,
        total,
      };

      // Enviar email via API do Strapi
      await sendOrderEmailToAdmin(
        orderData.id,
        orderCompleteData,
        process.env.STRAPI_API_TOKEN
      );

      // Gerar link para WhatsApp
      const whatsappLink = generateWhatsAppLink(
        orderData.id,
        customer,
        cartItems,
        total
      );

      console.log("NotificaÃ§Ãµes enviadas com sucesso");
    } catch (notifError) {
      // NÃ£o interrompe o fluxo se as notificaÃ§Ãµes falharem
      console.error("Erro ao enviar notificaÃ§Ãµes:", notifError);
    }

    // 6) Retorna sucesso
    return NextResponse.json(
      {
        message: "Pedido e itens criados com sucesso",
        order: orderData,
      },
      { status: 201 }
    );
  } catch (err) {
    console.error("submitOrder error:", err);
    return NextResponse.json(
      { error: err.message || "Erro ao processar o pedido." },
      { status: 500 }
    );
  }
}

// Bloqueia GET nessa rota
export async function GET() {
  return NextResponse.json({ error: "MÃ©todo nÃ£o permitido" }, { status: 405 });
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/checkout/page.jsx ===
// src/app/checkout/page.jsx

"use client";
import React, { useState } from "react";
import { useCart } from "@/context/CartContext";
import { useRouter } from "next/navigation";
import CheckoutLayout from "@/components/CheckoutLayout/CheckoutLayout";

export default function CheckoutPage() {
  const { items, clearCart } = useCart();
  const router = useRouter();

  const [customer, setCustomer] = useState("");
  const [email, setEmail] = useState("");
  const [phone, setPhone] = useState("");
  const [loading, setLoading] = useState(false);

  // FunÃ§Ãµes para atualizar os valores dos estados
  const handleCustomerChange = (value) => setCustomer(value);
  const handleEmailChange = (value) => setEmail(value);
  const handlePhoneChange = (value) => setPhone(value);

  // CÃ¡lculo do total
  const total = items.reduce(
    (sum, item) => sum + item.price * item.quantity,
    0
  );

  const handleSubmit = async (orderData) => {
    setLoading(true);

    try {
      const res = await fetch("/api/submitOrder", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(orderData),
      });
      const result = await res.json();
      alert(result.message);
      clearCart(); // Limpa o carrinho apÃ³s sucesso
      router.push("/success"); // Redireciona para pÃ¡gina de sucesso
    } catch (error) {
      alert("Erro ao enviar pedido.");
      console.error(error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <CheckoutLayout
      items={items}
      total={total}
      customer={customer}
      email={email}
      phone={phone}
      loading={loading}
      onCustomerChange={handleCustomerChange}
      onEmailChange={handleEmailChange}
      onPhoneChange={handlePhoneChange}
      onSubmit={handleSubmit} // Passando a funÃ§Ã£o de submit para o CheckoutLayout
    />
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/favicon.ico ===
         (  F          (  n  00     (-  –           ¾F  (                                                           $   ]   º   º   ]   $                                           ò   ÿ   ÿ   ÿ   ÿ   ò                               8   à   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   à   8                  â   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   â              ¡   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¡       #   ô   ÿ   ÿOOOÿ®®®ÿ«««ÿ«««ÿ«««ÿ«««ÿ­­­ÿgggÿ   ÿ   ÿ   ô   #   Y   ÿ   ÿ   ÿÿíííÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿıııÿ555ÿ   ÿ   ÿ   ÿ   Y   »   ÿ   ÿ   ÿ   ÿkkkÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   »   »   ÿ   ÿ   ÿ   ÿ			ÿÍÍÍÿÿÿÿÿÿÿÿÿäääÿÿ   ÿ   ÿ   ÿ   ÿ   »   Y   ÿ   ÿ   ÿ   ÿ   ÿJJJÿıııÿÿÿÿÿkkkÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Y   #   ô   ÿ   ÿ   ÿ   ÿÿ¶¶¶ÿÕÕÕÿ			ÿ   ÿ   ÿ   ÿ   ÿ   ô   #       ¡   ÿ   ÿ   ÿ   ÿ   ÿ111ÿDDDÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¡              â   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   â                  8   à   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   à   8                               ò   ÿ   ÿ   ÿ   ÿ   ò                                           $   ]   º   º   ]   $                                                                                                                                                                                                                                                                                    (       @                                                                               ,   U      è   è      U   ,                                                                                      *   …   Ò   ù   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ù   Ò   …   *                                                                      –   ó   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ó   –                                                          Q   á   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   á   Q                                               r   û   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   û   r                                       r   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   r                               O   û   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   û   O                          ä   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ã                      —   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   —               (   õ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ô   '           †   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ888ÿ‹‹‹ÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿˆˆˆÿ‰‰‰ÿ___ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   †          Ô   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿîîîÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿSSSÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ô      +   ú   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿhhhÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ®®®ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ú   +   T   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿËËËÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿôôôÿ,,,ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   T   ‚   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿGGGÿıııÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ      é   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ­­­ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿäääÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   é   é   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ+++ÿóóóÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿjjjÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   é      ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ‹‹‹ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÌÌÌÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ‚   T   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿãããÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿıııÿIIIÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   T   +   ú   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿhhhÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ¯¯¯ÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ú   +      Ô   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿËËËÿÿÿÿÿÿÿÿÿôôôÿ,,,ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ô          †   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿGGGÿıııÿÿÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   †           '   ô   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ±±±ÿìììÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   õ   (               —   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ333ÿ___ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   —                      ã   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ä                          O   û   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   û   O                               r   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   r                                       r   û   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   û   r                                               Q   á   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   á   Q                                                          –   ó   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ó   –                                                                      *   …   Ò   ù   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ù   Ò   …   *                                                                                      ,   U      è   è      U   ,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               (   0   `           -                                                                                             	   (   L   j   ³   ø   ÷   ³   j   K   (   	                                                                                                                                          V       Ø   ø   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ø   Ø       U                                                                                                                      %   ‹   á   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   á   ‹   &                                                                                                      ‹   ï   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ï   ‹                                                                                          Q   Ü   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ü   R                                                                              Š   ş   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ş   Š                                                                     ­   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ­                                                             ¸   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¸                                                     ®   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ®                                              Š   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Š                                       P   ı   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ı   O                                  ß   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ß                              ‹   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ‹                       #   ñ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ñ   #                   Œ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ‹                  ä   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ$$$ÿhhhÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿeeeÿPPPÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ä              U   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿëëëÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿsssÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   U           ¡   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿeeeÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÌÌÌÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¡       	   Ú   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÉÉÉÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿıııÿHHHÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ú   	   (   ù   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿEEEÿüüüÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ®®®ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ø   (   K   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿªªªÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿôôôÿ,,,ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   L   j   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ)))ÿòòòÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿŒŒŒÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   j   ´   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿˆˆˆÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿãããÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ³   ø   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿáááÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿiiiÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ø   ø   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿeeeÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿËËËÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ø   ³   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÉÉÉÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿıııÿHHHÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ´   j   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿEEEÿüüüÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ®®®ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   j   L   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿªªªÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿôôôÿ,,,ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   K   (   ø   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ)))ÿòòòÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿŒŒŒÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ù   (   	   Ú   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿˆˆˆÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿãããÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ú   	       ¡   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿáááÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿiiiÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¡           U   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿeeeÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÌÌÌÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   U              ä   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÉÉÉÿÿÿÿÿÿÿÿÿıııÿHHHÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ä                  ‹   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿEEEÿüüüÿÿÿÿÿ®®®ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Œ                   #   ñ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ¬¬¬ÿûûûÿ,,,ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ñ   #                       ‹   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ222ÿ}}}ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ‹                              ß   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ß                                  O   ı   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ı   P                                       Š   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Š                                              ®   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ®                                                     ¸   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ¸                                                             ­   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ­                                                                     Š   ş   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ş   Š                                                                              R   Ü   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   Ü   Q                                                                                          ‹   ï   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ï   ‹                                                                                                      &   ‹   á   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   á   ‹   %                                                                                                                      U       Ø   ø   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ø   Ø       V                                                                                                                                          	   (   K   j   ³   ÷   ø   ³   j   L   (   	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ‰PNG

   IHDR         \r¨f   sRGB ®Îé   8eXIfMM *    ‡i                                D"8s  IDATxí]	°Õ™n”]<QVA–èÄh$	ÊNŒ13*ˆq°ÂdªÄ©I¡ˆ˜D“L2“ª(Î(Ô˜2ÖÄ™ÑG	‹Áq_@å±ˆà†ŠxÈ›ï»Ğ¾{o÷½½ÓııUß{}»OŸå;çÿûôùÏ9İÂ‘d®(Dg Ğ8	èôN º]€î@ hx¥?v ÀNà3à=`;ğ6ğ.ğ&°àuâà  ±”6‰P©Ğ½€Á@ÿÃ RÓ PùiZqÊ^DNãà€wp¼Ø¼ĞXĞhĞ˜Hg@ÀÌ
:Ùâ|ğ5` p"@À'¼É²™s{ëpü*ğ2ÀŞ…Ä d Ò¯Œ–È|(0ø
0 à“>Kò
³xX¬6 IJÈ ¤C|?$KENØ}Ï“|ŠÂòµáàöh $	2 Ù|/§Â . Nz ’#¼ÃW€eÀ
à5€ã’ˆÜ¶ˆúà;Ày •¾ ñgàs©h^  IÄÈ DL(¢;¸8 ÒHjg€cH|x 1 ËR"Œa€ïôÓ• GÁÙ@…è9`/`%0èHÄ@jğ½~,° ÛK
Ÿ,t).ÎèI‘ˆDèT¦Oû)~º°Vìu$b èª›ĞU%¥7“ƒ¨›ù _É$b 8Aç×À€ßøJö3` 510wQñ?¤øvrğÑá:ü2şKÄ@ ¤øv*{%#í‚AZ€å’^(õÏ=ñ³g \ãÀWƒÛ€É!:àß,`à6ıÏ643:@’c.FÙŸ¤ğùä€u?Ğ<'áİ€ƒ€”_Üvp: É8Q¾›
IñÅ·p{3ÎóĞkHÈ¢ŒG¡¼•®cñÑ¼<62&‹
×2uCÁÿàÚòæ•­ßâ¤Tø3Ú
½ê€›…;î¼”ªd/~m€½.ø’XÆ@{äw.°ğ«d]G•Ú {lKÜàEbœÿı(P©RuMüTÛC›ÒÚÃÀdäï])¿Œ_Lmà=Äû=@bœÍ÷K€ÛGUkÙ^œUÓØÆØÖøš)1€È»gÕT¢ÂŠ¯°m`9Ú\Ú®³ÀQşÍ@ØÊÔıâ°–6ğ:ÚÕ^›w¬òï¸E—D¤Á ç	ü5°àºëÄFĞ,ßÜ
ğX"Òd€mğ<€nB~òì@´¸÷µt×tx‹»ü;ÚfŞ>ñ“ªíI8µˆ»¿8Ó¸C1Ûª$B¸•§e†©İ+ş’jl«ÜEZÃÇ& ©ÊS:â:Š6°möë´ÿ\G1¥ç`¢¨Å!“nl»lÃÆŠÉ^€Q`í·@OcÙSÆÄ@e¸Í·º¹ç¤qbªp•ÿãS†Ä@upšº±FÀD@å¿Ğ“¿º†¦Ğæ2@#À¹ÆõL3 £A’”$H2Ç _h¶FH#rq(íÿOàDƒò¤¬ˆ¨àrunGOWaêbŠ &–SgDñ3ÀEDçto§*Ç¤šú¡Ä9kŠİ~)¿•¡,$Â x¿RŸ1˜vàK áÀ9€DäU(ğw®&LEÒäê©»€S)¹é3ĞY8x8 $.i€(íŒÄK¬Å€YœìğaÈ]­—´À4”ôÇ€	c‰“®Å@3¸fà€ó•4Æ Æ¢„ÿĞ/*bàüş Çş˜$!I€~‡Ø7ÉB*-1`	o Ÿ º	‘$»àÇ¡D‹¾‰”L‰ˆûàòß êJ"’äÀOQ¢Ë)•ö2@#Ğx4‰"$e ¨ø·Iö8’àOiˆ8ø"İ ¼GäŞ8[xÄt<ñ.´´7&‚m&ØR^‹³tq÷ Ø•á.¾§ÅYÅ-2È ½d§ ûã*_Üà&d|j\™W¼b ãôGùö«â*gœ¯ £‘é‡ÄF4ã"IñŠØƒ´/ b1q€NÈğãÀY€Dˆp¼ŒÛ9îãpÑ}w\¯ ó‘Ô¤£“Ó1 j`€èOûŸî­xK=€ÑHñ÷ ÷A“ˆ1Ÿ#¾
D:U8jÀõıtù©ë$b bA||ØU¼Q¿ü26%ªÌ)1 Šè…_Àê¢³!~DÙàºæ• ¿à+b >A´Ü:]ÑE$ˆ£50òGDhRÑtèĞÁéİ»wRÉ)ğPÇ ‘èn$‘ 3ÜÖë@bS§Nu–,Yâ´jÕÊ²œç:»¡ôÜ;ÀáÀßó@£`Ç|ã–-[)“'OVıÙÕ†©sFxÚ®“âÛ¥øn}Í›7¯ üü³~ıúÆºº:»ŒÀQ—©J_¤ÎUKj8–q0xğàÆ;v4 Ì=[õhW=¾	İë	¤&·!e5Ë8hÑ¢Eãİwß]¤üüñá‡6öïß_õiW}şSZÚ?	¿/`Ÿ;vlã¾}û2 <±hÑ" »À§ĞAî¹‘¸ÜÕX,ã mÛ¶+V¬(©ü<¹wïŞÆ#F¨^íª×;“ÖşaHğc ûà”)SÊ*¿{aùòåpÊØc89(Ñ^€şö4&E¦ÛoÃ†®Wü/· uÆ=±^€ş*?{k^·_EíÇÅúúz¹íªgö† UI-‹è{WU*
œ:pû9.tÚ·o(/İºus>ûì3ç‰'^Rg€ßäÚGâÌI_D®‘»åÜ~~½ ¹­{øúÙ?N0‘7½SêØ.Æ×¸ÿ~?}/y]nA;êØ£‹³ã2 ]ñFOB2C?·_I­÷œ”[Ğ:°:Ú=#ÀOzKé-ã ˆÛÏ£ï%å´®İ?jĞşIÀ®†PÛ¯¤æ{NÊ-hUİÿt•:™œƒ˜øõ ,â ·ŸG×KÊ-hUÛç¢cƒhP7 ÿÎ¡Â˜Á@µn?¿\Ó-¸k×.¹ıˆ2ã:õú ğ`ÙáF„Û=ı-á V·_ÉG¿ç¤Ü‚Vé İõ}¢0 WIù­ªøFºıÊ­öóèsM‡rZÕ8pJ¸QÜ*@OK8ëöó³
rZ¥Ôİ–a, ßûwË ØSéW^y¥Ÿ‡¾.· 5íat7ÔØİ¤üÖTv#İ~7n­àA"¸üòËÕ+´£WøèpMÂÅ/ªhK8ˆÒíçgä´F/^„·«ÅŒÀM{e ì¨èR›|ú)qØë7İt“æ?8'àµ€KùíP~ºıî¹ç°ú\õırÚÑ> Ç·Uk ØeP÷ß|ë^xÇéöó³
‹/V/Àüvòô™¯ôå„ä¢*×pâvûù ¹­Ğ¾ÊŸ]JûË}óˆk8(•ˆÎÅÇÀÄ‰Ñ£GÇ—€OÌmÚ´q,X oúğ”òe.â˜^ ¡QxĞÓßp’tûùõä4^_ƒN—{à†¾øÅyÄ2 †s¤ÛÏÏ Ğ-Ø¹sgµsÛÌĞiêv‘”Z8
!~PJ?Œc€«ıîºë®À›|Æ] ®Ü½{·³zõê¸“Rüµ1pnãÔàzïí¥º¼tlpû9³fÍrºvíjTæ®¿şzß4*OÊLã‹~•øÑçÔ•3˜ƒ4İ~~¯r­;ÔmêxYŒ+üÀ€€¡¤íöó3 r­;Ômêx“4à÷Å:7]ÕqLš4)U·Ÿ!rú1”êuê6¿ìÕ$ÍÀ7›®èÀ8ºwïîÌ™3Ç¸|5Ï>?î\zé¥ÍOë·œëÍ†× ğø,ïE›ÅÀŒ3œš•©2¹¹å–[œººº2Wu:E¾‚´›¼^p.H1cJºtû]}õÕB˜uéÔSOu®ºŠ»ÉIc€O¥òÄ%ƒ  ÆAZ«ıüüü®kµ ‘ºD?Ç5 Ş@Q×À ÿé3Àwê+®¸"ıŒT™ÎSÀUŞ¥à13Àî?ûâ5 M'İ‹úŸ>pûşZµj•~fjÈ×ˆ×¡Ô‚n©¦±>× ğÿi5D¤[bf íÕ~a‹'·`Xc¹Ÿã -¼1ók¢›½ÿÄI«ıüŞ÷ı®kµ QºÅ¯|ókßMËé(92È@’t°ÉíçÇİ‚X-èL×“a€úN4€“qÜ'$f0@·@V„nA›Ü˜Yá½L9:â|/^sÇ ú—	¨Ó)0`êj¿°T\wİuZ-–ÄèîÂ¨\ 	@Ñ:¦±cítûùœ{È-èÇRb×û1%× ôI,Y%T‘Ûİ~‡‹rú1”ØõÂCŸ€,¼$–´*Ë€é«ıÊf<à¹0zş¥èhÕFü„û¦ ·Ÿ«ı|â€¯8Z-èCRü—¹Tg× ĞHRf€‹glYí–ª¹sçÊ-–Äp÷Ó'+Ãèî¶mµ_Ø’gÍÍ–îçC¿{ ô	òÃ’”ÈªÛÏÎ™3gÊ-èGR|×¹7`G€Şñ¥¡˜ƒ0U·Ÿ_ÙµZĞ¡Ø¯ŸD )À±ó\>¬»ıÊ—üĞ¹ıŠõz N–¤Ä@Öİ~~´Ê-èÇP¬×{rs€¿´@¬<—œ›|.]ºÔ¸|”Îm|gûõëç¬_¿Şyå•WâKD1—bàM½”¢%¡s\“·Ÿ¥rú1Ëõnì\–Æ’„"-É İ`.4æÛ~%3™àI}[0A²$µ“= -Ò>BH"G®Û^r„­<ÂEBGİi Ú%”˜’9Ì@^İ~~@«ıŠüú1Üì€†@’ tû-[¶ÌèÏ{%@CÙ$ğmAgüøñÎš5kÊ†Ñ…ÈøœŠ/åŒOÿˆlßäÓ¿„áBĞ@.X°À±uäp¥Oüî6œ—x²9MPn¿`ß·o_§¾¾^nÁ`t…
¥§(úª»™ƒ\rûùsÆAÒyóæéÛ‚şT…¡@h
ƒE0lØ0çÎ;ïtÚµÓ˜kÆ¸N ¡¡ÁYµjUà
S#ì|^ã½º- |¢İpÃN—.…­ØŞ¥`×^{­zLñ6ƒƒ4 ŸÄ›†bç¨öe—]&"ªd€sÎœ9UŞ¥àU0ğ!ÀÁ*nPĞ*`—ÿæ›oÖ¨v•¼¹Ái8GåşÔÿhh ØmœŠÍËÀäÉ“sÏ=×{JÇU0ÀÕ‚óçÏwZ·æş’ˆø”ƒ€ì›ö8bEzôèá,Y²Dïş![CŸ>}œ7:k×®“noÆÀfö >jvR?#b€ƒXˆ(¶üFÃAT¾FÕÕióêˆ[Á{ì°zvÄç>º¡C‡Êía+[0B2Dµœ=€íG~ë(
øÄºñÆÕõ‚LO×\sÜ‚>"8|‹`[)
&Lp8ø'‰–öäŒ”Óí4 oGeÎ#£ÛÀlÙ’_\“DÍ€Ü‚‘2ZØl¢Üi´9ŒtäÈ‘9f Ş¢Ë-¿œ¼‹=€‡YÌyˆn?uQã¯}XÍ¬ÍsAïi >=ŒĞ1æ=RÉí+à +­Ü‚¡¸.2 šŠKì«·ßôéÓCÆ¢Ûƒ20hĞ ‡Ë«%53À5@…MA¹%˜¦×Ì£ãÈí‚¼·j[õä9Î;¸û _(¯ú§¿µ0ÀÕ~rûÕÂ\¸{ômÁPüÜÿ®x#TT9¾™n?¾Êí—N# á•×¥&î}× ¬¯)
İTVL¯!¸ßÔjÁªë`ïp ß8@RrûUAVŒAå¬šÜ=¸ã-Şå€÷pLHª`@n¿*ÈŠ1¨Ü‚U“Ëõ?}w ]ìH2@·ß´iÓ†V°¸ [Ë¯%àôÿ‚ëß5 8±)Ğ­
T`€›|rZbZ-¸.Ö!da+@× ğÎçßó€Zígf[0p½¼æ†ô ä¤ I´Égr¸$· o%PÇ_rCyÀVœ|ß½ ÿ¥à"mòYšÎÊ-è[ lÚÄk xAã ø“Û¯9]¢[pÒ¤IåÈ¨¬pP“ÇÏk ŠºFeÙÌÈígHEødƒnAm"Z–$õ5}„›‚zå8üéô2røX›|– ÅàSÜ»w¯³råJƒs™JÖ~T›fşz{ ÌÍ« ÷xĞj?jµàQ•Eİnò ğjsÀùÁ|GxĞ·ı<dXt(·àQ•Eİ.¬p¯47 Üğ)÷¢ş;…Ïysµ_«V­D‡…È-XTiÔí¢ı?› †~¼è–œÿÛÏî ·`Qı=Vô?šòú^à
€‚¹ºı–.]ª|XŞ
ômÁB~€¿?ŠÆøJõ ŞD —·äüÜ~Ùh rê‘óÿ©ÛERªÀ…Aİ€óŠBæìİ~wÜq‡Ó¾}ûœ•<›Å•[Ğ¹5ûdóÚ-Õ`˜5 ?Kqİ~l4’ì0@·à)§œ’/I‚®(¼œà‡Ø‹ü…¥nÎê9¹ı²Y³4èœ!˜CÙˆ2×—*w9ÀÀGKİõsî&Ÿrûe³¦súé¶? 6Ù8JÊ |(òuwOä´d°&K)‡nA¾Ê?RšÒn@7,·º8Á=‘õÿrûe½†•nÁM›69k×òM7óÂéı·J•´R€]†e¥nÊê9¹ı²Z³Ååâ /?á“o>ŒÒó•¾¤”rzrÒÀ óó`åöóV{ö»uëæ4448«V­Êra÷ p³ îõQRZ”<{ädK.F9•½#~Tâ¾ûîs.¾øâìN%*Ë ÀğáÃuë8G&“²¥ì/W:*x%á{Ã}@¦ »‚lõõõNc#çAIòÀÀ±Ç›õiŞ÷£Ë*?ëØ¯À0}€g€ãùC"Ä€pÛ¯³€Šßû¨4è–’Ò(bÀ8€_QùY” €áîr7'€—ˆ`·ÿî ùj ¸6à… *Œ©3ÀWögƒä"¨àl¢¡Âˆ1:ì±Sg}%È  	¹¥P?÷„ş‹1`›£¯ÉYĞ ãâ"‹‚Dª0b@¤Æ İö”Ÿ9¬¦Àğı¾[tá‰F1À‡ôp`kĞ\UÓ`œÜRø·A#W81 e`)RÛZMŠÕö ÷€[uæ‰F0ğ	rq.ÀÕ¥Ú #^ğ=C"Ä€9P'«R~f½– ï
pn€zdC"Òe ¦§?³\K€÷½¨@&$b }jzú3Ûµö x/{èÄ1 Ra€#ÿ|÷çÆŸUK­= &Ä^€æTM¹n‘2À9ÿ5)?s¦Àû{O'ó‡DˆDà’ßo [kMÕoK0¿xÿŒ ÜTd‚_@]b ræ ÆGÃÄ¶À´; «€¯ò‡DˆDàêÜ1ÀgaRÛ`ÚÜ'`0ˆÂ  ‰>\ë/ù„ñ½fĞùƒøñ÷„Å€ˆß!fn÷Z¢|bŸ†ÜğU .t®åà¤ŸÑÀÚrª9Å+€›ı‘­€±î	ıb rnEŒDk”= æé8àÀÙü!b RClã€PŞEÙ`¼ÜŒK†'~ß@‰ Ë}*°!`ø@Á¢6 Lô ;À	$b@DÃÀ?#šÈgŞFı
àµV”ˆ1vıÇ;ÃEsôİQ¹›ÇÌ=É®ö4¿ ßb@TÅÀn„ş!¹ò3q¼0^ÊV€ã c ‰µ1ğÜ¶´¶[ıïŠëÀM¹=8Iˆİ‰Õ1@Ú…@Cu··`N¸oÀã WJÄ€Æ WúÑåÇe÷±Iœ¯ n¦¹Nàmà¯€¸ÆÜ´ô_d(Ä4`EÜ…IÂ °¯œ"ÌµË1 *3ğ+\şEå Ñ\MâÀÍ)g	rÁ¦
»Œè¿8š>õ¿pô?vIÒ °0€Ç€~ü!b ˆ­øÅ$'Ó%"I¿“¿RıÀi1 0°‡? S~&Ô Ór…ä’Æ€¤{ nô_˜ÄÀÈÌLà?’ÎT€eäÔÆÀ7ùC"rÎÀOQ~"qIË ° O 8?$b §Ü‹rÿ#@×_â’v¼JÌ™‚£/¹é3ğ'dá/ÈÖ÷W[¤¤›ço'Nüğlóú-2Î Ûüå@jÊO~Óî0”À2` HÄ@ÆØ„òĞ+–ª¤İpOB® ŞuOè¿È(lãS€Ô•Ÿü¦9Èô½ò~ğcß:x/èXd„.ğù°Æ”ò˜d ÈÉVày@F $H2Å •Ÿïü+M*•i€Ül8O@F $H2Á •Ÿå®2­4& r´POÀ´Ö¢üÔÂ€ûä7NùYS ó¶ øÀYƒ1`ğã;ÿJS3n² g['‘@W@"la`32Ên?'ûHB2p
îhÄm€mu ‰“×j@F@˜ÜV ²­Z!¦¿xIä”ÉÿH®y™Ñ±)üù>ÀåZ!6 ºà”aÎ`äş‚¦ÌdDV$9f€ëù	pM¿6»I¨!LG:\LdrwPyË~ıPá§%Ôæ•L3Æá7çTKÑÄAm€mo|³6©Ÿ	3Ğé-Òh J3¿¼?67 á¶yr¶”"€ûşàgÈÎ4. $±1À÷ı_¼[*Š¸&¸¤˜S/õdq´Îìãä‰ÁCŞâh Š3¿¼>Š6Å¶%±€¶Èã\€#´RZq¦ğ=lK|Å”XÆÀXäWSˆe j5 /¡ıĞÓ$±˜:äıv@½‚ †€Î8Ğ×d„1(‡z2~Fà)´ùö3¢ôÍ‹ÁŞÀl€®C¿† ëùâè#´‰›í=².\Lt? %Ñ N$9b %Ê:àşƒ2ùä€u	 É1|-˜	ldòÁ÷œœt $b À@?ü¥·@† »FàcÔïÏ^€D”d€[9ıà zÙà€ŠÏ:
HÄ@ ¾ŒP2v )~ ¦®@•àüïŸz5°Ç|€úÒ¿R«ÖµªàÁ|`# W39Ø‚ºá<î"-±0Àï\<ìdÒå€uÀoGLz 1œGp°à—e’å€¯d‹ .øjHÄ@jôFÊ3€•@ c{s<ÿùJ&	É@‹÷ëöb¸ÙÀw‹  ²§ ©nÁµàvğœ²û< ‰ˆ€ˆˆ,M;œû*p>p!0hHüà{=•»ğüxà]IÄÈ DLh™èÚâ<'¡Œh8Ç@V Á#ïã˜Jÿ°àfû IŒÈ ÄHn…¨ûãWŸ}àNÆt[uò$Ÿ¢°›§å ş@’ 2 	’]&)† #€3ˆ“,	=%¯TôÕÀkÀ&à  I‰€”ˆ÷I¶®Ó³ğ Ù[8	è	´L–]È]tïTğgõÀ6à-@b2 U†OVºã: A?€¯} .iî|	àxCœÂ÷rvßw; ÎÀ#ê>éi 8_b82 †WP€ìÑõè  {'n¯áÓ8ğz;€Æ¤yİsŸ œÃ@¥¦¼P¡·o|ÂSùih $3ğÿ@ß¹jìŠá    IEND®B`‚
=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/globals.css ===
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* embla-carousel setup */
.embla {
  width: 100%;
}

.embla__container {
  scroll-snap-type: x mandatory;
  transition: transform 0.1s ease-in-out;
}

.embla__slide {
  scroll-snap-align: center;
  cursor: pointer;
}

/* opcional: escondendo a scrollbar nativa */
.embla {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.embla::-webkit-scrollbar {
  display: none;
}

/* globals.css */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* esconde os spinners no Chrome, Edge, Safari */
input[type="number"].no-spinner::-webkit-outer-spin-button,
input[type="number"].no-spinner::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* esconde o spinner no Firefox */
input[type="number"].no-spinner {
  -moz-appearance: textfield;
}

/* Adicione isto no seu Tailwind ou CSS global */
.cep-mask {
  /* exibe o traÃ§o no :after quando hÃ¡ 5 caracteres */
  position: relative;
}
.cep-mask::after {
  content: attr(data-display);
  position: absolute;
  left: 0.75rem; /* padding interno */
  top: 50%;
  transform: translateY(-50%);
  color: #aaa;
  pointer-events: none;
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/layout.js ===
// src/app/layout.js
import { Geist, Geist_Mono, Roboto } from "next/font/google";
import "./globals.css";
import { CartProvider } from "@/context/CartContext";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

const roboto = Roboto({
  subsets: ["latin"],
  weight: ["400", "700"],
  variable: "--font-roboto",
  display: "swap",
});

export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} ${roboto.variable} font-roboto antialiased`}
      >
        <CartProvider>{children}</CartProvider>
      </body>
    </html>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/page.js ===
// src/app/page.js
"use client";

import React, { useState } from "react";
import useCategories from "@/hooks/useCategories";
import NavBar from "@/components/NavBar";
import SideDrawer from "@/components/SideDrawer";
import CartDrawer from "@/components/CartDrawer";
import CategoryTitle from "@/components/CategoryCarousel/CategoryTitle";
import ProductsSection from "@/components/ProductsSection";
import FloatingCheckoutButton from "@/components/FloatingCheckoutButton";

export default function HomePage() {
  const { categories, selectedCategory, setSelectedCategory } = useCategories();
  const [isSideOpen, setIsSideOpen] = useState(false);
  const [isCartOpen, setIsCartOpen] = useState(false);

  const toggleSide = () => {
    // se estamos abrindo o side e o cart estÃ¡ aberto no mobile, fecha o cart
    if (
      !isSideOpen &&
      isCartOpen &&
      typeof window !== "undefined" &&
      window.innerWidth < 768
    ) {
      setIsCartOpen(false);
    }
    setIsSideOpen((open) => !open);
  };

  const toggleCart = () => {
    // se estamos abrindo o cart e o side estÃ¡ aberto no mobile, fecha o side
    if (
      !isCartOpen &&
      isSideOpen &&
      typeof window !== "undefined" &&
      window.innerWidth < 768
    ) {
      setIsSideOpen(false);
    }
    setIsCartOpen((open) => !open);
  };

  return (
    <div className="min-h-screen bg-[#202020] text-white pt-[10vh]">
      <NavBar onToggleDrawer={toggleSide} onToggleCart={toggleCart} />
      <SideDrawer
        isOpen={isSideOpen}
        onClose={() => setIsSideOpen(false)}
        categories={categories}
        selectedCategory={selectedCategory}
        setSelectedCategory={setSelectedCategory}
      />
      <CartDrawer isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} />
      {/* Carrossel full-width, fora do padding do main */}
      <div className="w-full">
        <CategoryTitle
          categories={categories}
          selectedCategory={selectedCategory}
          onSelectCategory={setSelectedCategory}
        />
      </div>
      <main className="max-w-6xl mx-auto space-y-12 p-2 sm:p-6">
        <ProductsSection selectedCategory={selectedCategory} />
      </main>
      <FloatingCheckoutButton />
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/app/success/page.jsx ===
export default function SuccessPage() {
  return (
    <div className="min-h-screen flex flex-col items-center justify-center text-white bg-[#202020]">
      <h1 className="text-3xl mb-4">Pedido enviado com sucesso!</h1>
      <p>Em breve entraremos em contato via WhatsApp.</p>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CartChangeToast.jsx ===
// src/components/CartChangeToast.jsx
"use client";

import React, { useEffect } from "react";
import { createPortal } from "react-dom";

export default function CartChangeToast({
  message,
  type = "success",
  onClose,
}) {
  // fecha automaticamente apÃ³s 2s
  useEffect(() => {
    const t = setTimeout(onClose, 2000);
    return () => clearTimeout(t);
  }, [onClose]);

  // cores suaves
  const bgClass =
    type === "success"
      ? "bg-black/75 backdrop-blur-lg border-green-400/20 text-green-400/80"
      : type === "error"
        ? "bg-black/75 backdrop-blur-lg border-red-400/20 text-red-400/80"
        : "bg-black/75 backdrop-blur-lg border-yellow-400/20 text-yellow-400/85";

  return createPortal(
    <div className="fixed top-20 w-80 left-1/2 transform -translate-x-1/2 z-50">
      <div
        className={`
          max-w-md
          ${bgClass}
          backdrop-blur-lg
          rounded-lg
          border
          px-4 py-2
          shadow-lg
          text-center
          font-medium
        `}
      >
        {message}
      </div>
    </div>,
    document.body
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CartDrawer.jsx ===
"use client";

import React, { useState } from "react";
import { useRouter } from "next/navigation";
import SimpleBar from "simplebar-react";
import "simplebar-react/dist/simplebar.min.css";
import { X } from "lucide-react";
import { useCart } from "@/context/CartContext";
import CartChangeToast from "./CartChangeToast";

export default function CartDrawer({ isOpen, onClose }) {
  const router = useRouter();
  const { items, removeItem } = useCart();
  const [toast, setToast] = useState(null);

  // calcula subtotal
  const subtotal = items.reduce((sum, i) => sum + i.price * i.quantity, 0);

  const handleRemove = (sku) => {
    removeItem(sku);
    setToast({ message: "Produto removido do carrinho!", type: "error" });
  };

  return (
    <div
      className={`z-40 fixed inset-0 ${isOpen ? "" : "pointer-events-none"}`}
      onClick={onClose}
    >
      <style jsx global>{`
        .cart-scrollbar .simplebar-track.simplebar-vertical {
          right: auto !important;
          left: 0 !important;
        }
      `}</style>

      <aside
        onClick={(e) => e.stopPropagation()}
        className={`
          fixed top-[8vh] right-0
          h-[100%] w-65 min-w-[40vh] max-w-[10rem]
          bg-[#1A1A1A]/70 backdrop-blur-lg
          border-l border-white/10
          origin-right transform transition-transform duration-350 md:top-[10vh] min-w-[40vh]
          ${isOpen ? "translate-x-0" : "translate-x-full"}
        `}
      >
        {/* BotÃ£o de fechar */}
        <button
          onClick={onClose}
          aria-label="Fechar carrinho"
          className="z-50 cursor-pointer absolute top-[1vh] left-[1vh] text-white text-[4vh] focus:outline-none"
        >
          Ã—
        </button>
        {/* ConteÃºdo rolÃ¡vel com classe especÃ­fica */}
        <SimpleBar
          style={{ maxHeight: "100%" }}
          className="mt-[6vh] pl-[0.5vh] pb-[40vh] cart-scrollbar"
        >
          {items.length === 0 ? (
            <p className="pl-[3vh] pt-[3vh] text-[3.5vh] text-[#dadada]">
              Carrinho vazio.
            </p>
          ) : (
            <ul>
              {items.map((i, idx) => (
                <li
                  key={i.sku}
                  className={`
                    flex items-center justify-between px-[1vh] py-[0.5vh]
                    border-b border-[#60606070]
                    ${idx === items.length - 1 ? "border-none" : ""}
                  `}
                >
                  <img
                    src={i.image}
                    alt={i.title}
                    className="h-[5.5vh] w-auto object-contain rounded"
                  />
                  <div className="flex-1 ml-[2.1vh]">
                    <div className="font-semibold text-[2.3vh] text-white">
                      {i.title}
                    </div>
                    <div className="text-[2.1vh] text-[#DADADA]">
                      {i.material}
                    </div>
                    <div className="text-[2vh] text-white mt-[0.5vh]">
                      x{i.quantity} Â· R$ {(i.price * i.quantity).toFixed(2)}
                    </div>
                  </div>
                  <button
                    onClick={() => handleRemove(i.sku)}
                    aria-label="Remover item"
                    className="text-red-400 hover:text-red-500/80 p-1 cursor-pointer"
                  >
                    <X className="h-[auto] w-[2.5vh]" />
                  </button>
                </li>
              ))}
            </ul>
          )}
        </SimpleBar>

        {items.length > 0 && (
          <div className="fixed pb-[22vh] bottom-0 left-0 w-full p-[2vh] bg-[#1A1A1A]/90 backdrop-blur-md z-60 border-t border-white/20">
            <div className="flex justify-between items-center text-[3vh] font-semibold text-white">
              <span>Subtotal:</span>
              <span>R$ {subtotal.toFixed(2)}</span>
            </div>
          </div>
        )}
      </aside>

      {toast && (
        <CartChangeToast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CategoriesNav.jsx ===
"use client";
import React from "react";

export default function CategoriesNav({
  categories,
  selectedCategory,
  onSelectCategory,
}) {
  return (
    <nav className="hidden md:block fixed top-1/3 right-6 bg-[#1A1A1A] bg-opacity-80 p-4 rounded-lg shadow-lg z-50">
      <ul className="space-y-2">
        {categories.map((cat) => (
          <li key={cat}>
            <button
              onClick={() => onSelectCategory(cat)}
              className={`text-sm ${
                cat === selectedCategory
                  ? "text-white font-bold"
                  : "text-[#B3B3B3] hover:text-white"
              }`}
            >
              {cat}
            </button>
          </li>
        ))}
      </ul>
    </nav>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CategoryCarousel/CategoryTitle.jsx ===
"use client";
import React, { useEffect, useRef } from "react";
import { Stardos_Stencil } from "next/font/google";
import { Anton } from "next/font/google";

const anton = Anton({ weight: "400", subsets: ["latin"] });
const stencil = Stardos_Stencil({ subsets: ["latin"], weight: "700" });

export default function CategoryTitle({
  categories,
  selectedCategory,
  onSelectCategory,
}) {
  const containerRef = useRef(null);
  const itemsRef = useRef([]);

  useEffect(() => {
    const c = containerRef.current;
    if (!c) return;
    c.style.scrollBehavior = "smooth";
    c.style.msOverflowStyle = "none";
    c.style.scrollbarWidth = "none";
  }, []);

  useEffect(() => {
    const c = containerRef.current;
    const idx = categories.indexOf(selectedCategory);
    const item = itemsRef.current[idx];
    if (c && item) {
      const cr = c.getBoundingClientRect();
      const ir = item.getBoundingClientRect();
      const offset = ir.left - cr.left - (cr.width / 2 - ir.width / 2);
      c.scrollBy({ left: offset, behavior: "smooth" });
    }
  }, [selectedCategory, categories]);

  const handleWheel = (e) => {
    e.preventDefault();
    containerRef.current?.scrollBy({ left: e.deltaY, behavior: "smooth" });
  };

  const handleKeyDown = (e) => {
    const idx = categories.indexOf(selectedCategory);
    if (e.key === "ArrowRight" && idx < categories.length - 1) {
      onSelectCategory(categories[idx + 1]);
    } else if (e.key === "ArrowLeft" && idx > 0) {
      onSelectCategory(categories[idx - 1]);
    }
  };

  return (
    <div className="flex flex-col items-center bg-[#1a1a1a] border-b  border-[#3A3A3A] pt-12 select-none">
      {/* TÃ­tulo com degradÃª e contorno */}
      <h2
        className={`text-6xl ${anton.className} uppercase pt-3  text-[#eaeaea] tracking-wide text-center`}
        style={{
          textShadow: `
      1px 5px 2px rgba(0,0,0,0.5),
      -2px -2px 2px rgba(255,255,255,0.4),
      0 0 50px  rgba(200,200,200,0.8)
    `,
        }}
      >
        CATÃLOGO
        <br />
      </h2>
      <span className="block mb-12  text-3xl text-[#D4AF37] font-bold ">
        2025
      </span>
      <div
        ref={containerRef}
        tabIndex={0}
        onWheel={handleWheel}
        onKeyDown={handleKeyDown}
        className="flex space-x-3 overflow-x-auto w-full px-4"
        style={{
          scrollbarWidth: "none",
          msOverflowStyle: "none",
        }}
      >
        {categories.map((cat, i) => {
          const isActive = cat === selectedCategory;
          return (
            <div
              key={cat}
              ref={(el) => (itemsRef.current[i] = el)}
              className={`relative flex-shrink-0 cursor-pointer transition-all duration-300 rounded-md min-w-[12rem] sm:min-w-[14rem] md:min-w-[15rem] ${
                isActive
                  ? "scale-100 opacity-90"
                  : "scale-95 opacity-75 hover:scale-100 hover:opacity-85"
              }`}
              onClick={() => onSelectCategory(cat)}
            >
              {/* Camada metÃ¡lica com efeito 3D */}
              <div
                className={`absolute inset-0 rounded-xl ${
                  isActive ? "brightness-110" : ""
                }`}
                style={{
                  backgroundImage: `
                    linear-gradient(145deg, #d0d0d0, #909090),
                    repeating-linear-gradient(
                      45deg,
                      #c0c0c0 0px,
                      #e0e0e0 2px,
                      #c0c0c0 4px
                    )
                  `,
                  backgroundBlendMode: "overlay",
                  backgroundSize: "cover",
                  boxShadow: `
                    inset 2px 2px 5px rgba(255,255,255,0.5),
                    inset -2px -2px 5px rgba(0,0,0,5),
                    2px 2px 8px rgba(0,0,0,0.5)
                  `,
                }}
              />

              {/* ConteÃºdo do botÃ£o */}
              <div
                className={`relative z-10 px-6 py-3 border-3 text-center rounded-xl border transition-all duration-200 ${
                  isActive
                    ? "border-[#D4AF37] shadow-[0_0_10px_rgba(255,255,255,0.3)]"
                    : "border-[#ffffff]"
                } hover:shadow-[0_0_8px_rgba(255,255,255,0.2)]`}
              >
                <h2
                  className={`${stencil.className} text-base sm:text-lg md:text-xl uppercase font-extrabold text-transparent bg-clip-text`}
                  style={{
                    backgroundImage: `
                      repeating-linear-gradient(
                        135deg,
                        #a0a0a0 0px,
                        #d0d0d0 1px,
                        #a0a0a0 2px
                      ),
                      linear-gradient(135deg, rgba(2, 2, 2, 0.5), rgba(0,0,0,0.1))
                    `,
                    backgroundBlendMode: "overlay",
                    backgroundSize: "100% 2px, 200% 200%",
                  }}
                >
                  {cat}
                </h2>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/AddressSection.jsx ===
import React from "react";
import InputField from "./InputField";

export default function AddressSection({
  cep,
  setCep,
  cepValid,
  loadingCep,
  address,
  number,
  setNumber,
  complement,
  setComplement,
}) {
  return (
    <>
      <InputField
        label="CEP"
        type="text"
        name="postal-code"
        autoComplete="postal-code"
        value={cep.replace(/(\d{5})(\d{1,3})?/, (_, p1, p2) =>
          p2 ? `${p1}-${p2}` : p1
        )}
        onChange={(e) => setCep(e.target.value.replace(/\D/g, "").slice(0, 8))}
        isValid={cepValid}
        required
        maxLength={9}
        pattern="[0-9]{5}-[0-9]{3}"
        title="Digite um CEP no formato 00000-000"
        placeholder="00000-000"
      />

      {address.street && (
        <>
          <InputField
            label="Rua"
            value={address.street}
            readOnly
            className="text-[#bbb] font-bold pointer-events-none"
          />
          <InputField
            label="Bairro"
            value={address.neighborhood}
            readOnly
            className="text-[#AAAAAA] font-bold pointer-events-none"
          />
          <div className="grid grid-cols-2 gap-4">
            <InputField
              label="Cidade"
              value={address.city}
              readOnly
              className="text-[#AAAAAA] font-bold pointer-events-none"
            />
            <InputField
              label="UF"
              value={address.state}
              readOnly
              className="text-[#AAAAAA] font-bold pointer-events-none"
            />
          </div>
          <div className="grid grid-cols-2 gap-4">
            <InputField
              label="NÃºmero"
              type="text"
              value={number}
              onChange={(e) => setNumber(e.target.value)}
              isValid={number.trim().length > 0}
              required
              placeholder="99"
            />
            <InputField
              label="Complemento"
              type="text"
              value={complement}
              onChange={(e) => setComplement(e.target.value)}
              showAsterisk={false}
              placeholder="PavilhÃ£o Esquina"
            />
          </div>
        </>
      )}
    </>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/CheckoutLayout.jsx ===
// src/components/CheckoutLayout.jsx

"use client";
import React from "react";
import Link from "next/link";
import { ArrowLeft } from "lucide-react";
import ProductSummary from "./ProductSummary";
import CustomerInfoForm from "./CustomerInfoForm";

export default function CheckoutLayout({
  items,
  total,
  customer,
  email,
  phone,
  loading,
  onCustomerChange,
  onEmailChange,
  onPhoneChange,
  onSubmit,
}) {
  return (
    <div className="min-h-screen bg-[#202020] text-white font-roboto antialiased">
      {/* Header fixo */}
      <header className="fixed top-0 left-0 right-0 px-4 py-3 grid grid-cols-12 items-center bg-[rgba(26,26,26,0.7)] backdrop-blur-lg z-30 border-b border-white/20">
        <div className="col-span-2 flex items-center">
          <Link
            href="/"
            aria-label="Voltar ao catÃ¡logo"
            className="flex items-center"
          >
            <ArrowLeft className="h-6 w-6 text-white mr-1" />
            <span className="text-white text-base font-bold">CatÃ¡logo</span>
          </Link>
        </div>
        <div className="col-span-8 text-center">
          <img
            src="/logo.png"
            alt="Logo do site"
            className="h-14 w-auto inline-block"
          />
        </div>
      </header>

      {/* ConteÃºdo principal */}
      <main className="pt-30 pb-10 px-4 max-w-6xl mx-auto space-y-12 backdrop-blur-sm bg-[#252525] bg-opacity-90 min-h-[100vh] md:w-120">
        <ProductSummary items={items} total={total} />

        <CustomerInfoForm
          customer={customer}
          email={email}
          phone={phone}
          loading={loading}
          disableSubmit={items.length === 0}
          onCustomerChange={onCustomerChange}
          onEmailChange={onEmailChange}
          onPhoneChange={onPhoneChange}
          onSubmit={onSubmit}
        />
      </main>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/CustomerInfoForm.jsx ===
import React, { useState, useRef, useEffect } from "react";
import { useCart } from "@/context/CartContext";
import Script from "next/script";

import InputField from "./InputField";
import AddressSection from "./AddressSection";
import {
  initPhoneInput,
  validatePhoneBR,
} from "@/components/CheckoutLayout/utils/phoneUtils";
import { validateEmail } from "@/components/CheckoutLayout/utils/emailUtils";
import { fetchAddressByCEP } from "@/components/CheckoutLayout/utils/cepUtils";

export default function CustomerInfoForm({
  customer,
  email,
  phone,
  loading,
  onCustomerChange,
  onEmailChange,
  onPhoneChange,
  onSubmit,
}) {
  const { items } = useCart();
  const phoneRef = useRef(null);

  const [cep, setCep] = useState("");
  const [address, setAddress] = useState({
    street: "",
    neighborhood: "",
    city: "",
    state: "",
  });
  const [loadingCep, setLoadingCep] = useState(false);
  const [number, setNumber] = useState("");
  const [complement, setComplement] = useState("");
  const [phoneValid, setPhoneValid] = useState(null);
  const [cepValid, setCepValid] = useState(null);

  useEffect(() => {
    const value = phoneRef.current?.value || "";
    setPhoneValid(validatePhoneBR(value).valid);
  }, [phone]);

  useEffect(() => {
    if (!phoneRef.current) return;
    const cleanup = initPhoneInput(phoneRef, onPhoneChange);
    return cleanup;
  }, [onPhoneChange]);

  useEffect(() => {
    const sanitized = cep.replace(/\D/g, "");
    if (sanitized.length < 8) {
      setCepValid(false);
      return;
    }
    setLoadingCep(true);
    fetchAddressByCEP(sanitized)
      .then((res) => {
        setAddress(res);
        setCepValid(true);
      })
      .catch((err) => {
        alert(err.message);
        setAddress({ street: "", neighborhood: "", city: "", state: "" });
        setCepValid(false);
      })
      .finally(() => setLoadingCep(false));
  }, [cep]);

  const handleFormSubmit = (e) => {
    e.preventDefault();
    const trimmedName = customer.trim();
    if (trimmedName.length < 2) {
      alert("Nome deve ter pelo menos 2 letras.");
      return;
    }
    if (number.trim() === "") {
      alert("NÃºmero do endereÃ§o nÃ£o pode ficar em branco.");
      return;
    }
    const emailCheck = validateEmail(email);
    if (!emailCheck.valid) {
      alert(emailCheck.reason);
      return;
    }
    const phoneVal = validatePhoneBR(phoneRef.current.value);
    if (!phoneVal.valid) {
      alert(phoneVal.reason);
      return;
    }
    const sanitizedCep = cep.replace(/\D/g, "");
    if (sanitizedCep.length !== 8) {
      alert("CEP deve conter 8 dÃ­gitos.");
      return;
    }
    if (!address.street) {
      alert("EndereÃ§o invÃ¡lido ou CEP nÃ£o encontrado.");
      return;
    }

    onPhoneChange(phoneVal.e164);

    onSubmit({
      customer,
      email,
      phone: phoneVal.e164,
      address: {
        street: address.street,
        neighborhood: address.neighborhood,
        city: address.city,
        state: address.state,
        number, // <â€“â€“ aqui
        complement, // <â€“â€“ e aqui
      },
      cartItems: items,
    });
  };

  return (
    <section className="bg-[#1E1E1E] bg-opacity-90 p-6 rounded-2xl border border-[#2A2A2A] shadow-inner">
      <Script
        src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
        strategy="afterInteractive"
      />
      <h2 className="uppercase tracking-wide text-2xl mb-4 text-[#DDDDDD]">
        InformaÃ§Ãµes
      </h2>
      <form noValidate onSubmit={handleFormSubmit} className="space-y-6">
        <InputField
          label="Nome/Empresa"
          type="text"
          name="name"
          autoComplete="name"
          value={customer}
          onChange={(e) => onCustomerChange(e.target.value)}
          isValid={customer.trim().length >= 2}
          required
          minLength={2}
          placeholder="JoÃ£o da Silva / Empresa XYZ"
        />
        <InputField
          label="E-mail"
          type="email"
          name="email"
          autoComplete="email"
          value={email}
          onChange={(e) => onEmailChange(e.target.value)}
          isValid={validateEmail(email).valid}
          required
          placeholder="joao@gmail.com"
        />

        <AddressSection
          cep={cep}
          setCep={setCep}
          cepValid={cepValid}
          loadingCep={loadingCep}
          address={address}
          number={number}
          setNumber={setNumber}
          complement={complement}
          setComplement={setComplement}
        />

        <InputField
          label="Celular"
          ref={phoneRef}
          type="tel"
          autoComplete="tel"
          defaultValue={phone}
          onChange={() => {}}
          isValid={phoneValid}
          required
          placeholder="(00) 00000-0000"
        />
        <button
          type="submit"
          disabled={loading}
          className="w-full py-3 text-lg font-semibold rounded-xl bg-gradient-to-r from-[#CFAF37] to-[#A8760B] hover:from-[#D4AF37] hover:to-[#B8860B] disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed"
        >
          {loading
            ? "Enviandoâ€¦"
            : loadingCep
              ? "Buscando CEPâ€¦"
              : "Finalizar Pedido"}
        </button>
      </form>
    </section>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/InputField.jsx ===
import React, { useState, forwardRef } from "react";

const InputField = forwardRef(
  (
    {
      label,
      value,
      onChange,
      showAsterisk = true,
      isValid = null, // true | false | null (sem validaÃ§Ã£o)
      className = "",
      ...props
    },
    ref
  ) => {
    const [touched, setTouched] = useState(false);
    const [focused, setFocused] = useState(false);

    const handleFocus = () => setFocused(true);
    const handleBlur = () => {
      setFocused(false);
      setTouched(true);
    };

    const baseClasses =
      "w-full p-3 rounded-xl focus:ring-2 focus:ring-[#D4AF37] placeholder-gray-400/13";
    const defaultState = "bg-[#1A1A1A] text-white border border-[#2A2A2A]";
    const validState =
      "bg-green-300/5 text-[#bbb] font-bold border border-green-500/20";
    const invalidState = "bg-red-300/5 border border-red-500/40";

    let stateClasses = defaultState;
    if (touched && !focused && isValid !== null) {
      stateClasses = isValid ? validState : invalidState;
    }

    return (
      <div>
        <label
          className={`block mb-2 text-sm text-[#DADADA] font-bold ${
            showAsterisk
              ? "after:content-['*'] after:ml-1 after:text-red-500/30"
              : "after:content-['(opcional)'] after:ml-1 after:text-[0.75rem] after:text-[#DADADA]/35"
          }`}
        >
          {label}
        </label>
        <input
          ref={ref}
          value={value}
          onChange={onChange}
          onFocus={handleFocus}
          onBlur={handleBlur}
          className={`${baseClasses} ${stateClasses} ${className}`}
          {...props}
        />
      </div>
    );
  }
);

export default InputField;

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/ProductSummary.jsx ===
// src/components/ProductSummary.jsx
// Exibe lista de itens, totais e botÃµes de remoÃ§Ã£o

import React from "react";
import { X } from "lucide-react";
import { useCart } from "@/context/CartContext";

export default function ProductSummary({ items, total }) {
  const { removeItem } = useCart();

  return (
    <section>
      <h1 className="uppercase tracking-wide text-3xl mb-6 text-[#DDDDDD] text-center">
        Resumo do Pedido
      </h1>

      {items.length === 0 ? (
        <p className="text-base text-[#AAAAAA]">Seu carrinho estÃ¡ vazio.</p>
      ) : (
        <ul>
          {items.map((i, idx) => (
            <li
              key={i.sku}
              className={`flex items-center justify-between p-4 rounded-lg ${
                idx % 2 === 0 ? "bg-[#1E1E1E]" : "bg-[#2A2A2A]"
              }`}
            >
              <img
                src={i.image}
                alt={i.title}
                className="h-12 w-auto object-contain rounded-md"
              />
              <div className="flex-1 ml-4">
                <div className="font-semibold text-base text-white">
                  {i.title}
                </div>
                <div className="text-sm text-[#B3B3B3]">{i.material}</div>
              </div>
              <div className="w-12 text-center text-white font-medium">
                {i.quantity}
              </div>
              <div className="w-24 text-right text-white font-medium">
                R$ {(i.price * i.quantity).toFixed(2)}
              </div>
              <button
                onClick={() => removeItem(i.sku)}
                aria-label="Remover item"
                className="ml-4 text-red-400 hover:text-red-600 p-1"
              >
                <X className="h-5 w-5" />
              </button>
            </li>
          ))}

          <li className="flex justify-between items-center mt-4 pt-4 border-t border-[rgba(255,255,255,0.3)]">
            <span className="font-semibold text-lg text-white">Total</span>
            <span className="font-semibold text-lg text-white">
              R$ {total.toFixed(2)}
            </span>
          </li>
        </ul>
      )}
    </section>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/utils/cepUtils.js ===
// src/utils/cepUtils.js

/**
 * Busca endereÃ§o a partir do CEP usando a API ViaCEP.
 * @param {string} cep - CEP com 8 dÃ­gitos (ex: "01001000")
 * @returns {Promise<{street: string, neighborhood: string, city: string, state: string}>}
 */
export async function fetchAddressByCEP(cep) {
  const sanitized = cep.replace(/\D/g, "");
  if (sanitized.length !== 8) {
    throw new Error("CEP deve ter 8 dÃ­gitos.");
  }
  const res = await fetch(`https://viacep.com.br/ws/${sanitized}/json/`);
  if (!res.ok) {
    throw new Error("Erro ao buscar CEP.");
  }
  const data = await res.json();
  if (data.erro) {
    throw new Error("CEP nÃ£o encontrado.");
  }
  return {
    street: data.logradouro,
    neighborhood: data.bairro,
    city: data.localidade,
    state: data.uf,
  };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/utils/emailUtils.js ===
// src/utils/emailUtils.js
// Sintaxe + blacklist de domÃ­nios descartÃ¡veis e suspeitos

import validator from "validator";
import disposableDomains from "disposable-email-domains";

const extraBlacklist = [
  "scammer.com",
  "spamdomain.io",
  "fraud.net",
  // adicione aqui outros domÃ­nios de golpistas
];

const blacklist = new Set([...disposableDomains, ...extraBlacklist]);

/**
 * Valida sintaxe e bloqueia domÃ­nios indesejados.
 * @param {string} email
 * @returns {{ valid: boolean, reason?: string }}
 */
export function validateEmail(email) {
  if (!validator.isEmail(email)) {
    return { valid: false, reason: "Formato de e-mail invÃ¡lido" };
  }
  const domain = email.split("@")[1].toLowerCase();
  if (blacklist.has(domain)) {
    return { valid: false, reason: "DomÃ­nio de e-mail nÃ£o permitido" };
  }
  return { valid: true };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/CheckoutLayout/utils/phoneUtils.js ===
import { parsePhoneNumberFromString } from "libphonenumber-js";

/**
 * Formata nÃºmero nacional brasileiro progressivamente.
 * Ex: 11912345678 â†’ (11) 91234-5678
 */
export function formatPhoneBR(raw) {
  if (raw.length === 0) return "";
  if (raw.length <= 2) return `(${raw}`;
  if (raw.length <= 6) return `(${raw.slice(0, 2)}) ${raw.slice(2)}`;
  if (raw.length <= 10)
    return `(${raw.slice(0, 2)}) ${raw.slice(2, 6)}-${raw.slice(6)}`;
  return `(${raw.slice(0, 2)}) ${raw.slice(2, 7)}-${raw.slice(7)}`;
}

/**
 * Inicializa o campo de telefone: formataÃ§Ã£o, validaÃ§Ã£o e emissÃ£o.
 * @param {{ current: HTMLInputElement }} inputRef
 * @param {(e164: string) => void} onPhoneChange
 * @param {(valid: boolean) => void} [setPhoneValid]
 * @returns {() => void} cleanup
 */
export function initPhoneInput(inputRef, onPhoneChange, setPhoneValid) {
  const inputEl = inputRef.current;

  const handleInput = () => {
    if (!inputEl) return;

    // Entrada bruta (pode vir com +55, espaÃ§os, traÃ§os, etc.)
    let inputValue = inputEl.value;
    let digits = inputValue.replace(/\D/g, "");

    // Remove DDI +55 se exceder 11 dÃ­gitos
    if (digits.startsWith("55") && digits.length > 11) {
      digits = digits.slice(2);
    }

    // Garante no mÃ¡ximo 11 dÃ­gitos
    const limited = digits.slice(0, 11);

    // Atualiza campo com mÃ¡scara nacional
    const formatted = formatPhoneBR(limited);
    inputEl.value = formatted;

    // ValidaÃ§Ã£o + conversÃ£o para E.164
    const parsed = parsePhoneNumberFromString(`+55${limited}`, "BR");
    const isValid = parsed?.isValid() || false;
    const e164 = parsed?.number || "";

    onPhoneChange(e164);
    if (setPhoneValid) setPhoneValid(isValid);
  };

  inputEl.addEventListener("input", handleInput);
  inputEl.addEventListener("change", handleInput); // cobre autocomplete

  return () => {
    inputEl.removeEventListener("input", handleInput);
    inputEl.removeEventListener("change", handleInput);
  };
}

/**
 * Valida e retorna nÃºmero E.164 de um telefone brasileiro.
 * @param {string} value - nÃºmero no formato E.164
 * @returns {{ valid: boolean, reason?: string, e164?: string }}
 */
export function validatePhoneBR(value) {
  const phoneNumber = parsePhoneNumberFromString(value, "BR");
  if (!phoneNumber) {
    return { valid: false, reason: "Formato de telefone invÃ¡lido" };
  }

  const national = phoneNumber.nationalNumber || "";
  if (national.length < 10) {
    return { valid: false, reason: "Telefone incompleto" };
  }

  if (!phoneNumber.isValid()) {
    return { valid: false, reason: "Telefone invÃ¡lido para o Brasil" };
  }

  return { valid: true, e164: phoneNumber.number };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/FloatingCheckoutButton.jsx ===
// src/components/FloatingCheckoutButton.jsx
"use client";

import React, { useEffect, useState } from "react";
import { useRouter } from "next/navigation";
import { useCart } from "@/context/CartContext";
import { useNotifications } from "@/hooks/useNotifications";
import NotificationDialog from "./NotificationDialog";

export default function FloatingCheckoutButton() {
  const router = useRouter();
  const { items } = useCart();
  const {
    list: notifications,
    add: addNotification,
    clear: clearNotifications,
  } = useNotifications(7);

  // Visibilidade do botÃ£o
  const [visible, setVisible] = useState(false);
  useEffect(() => {
    setVisible(items.length > 0);
  }, [items.length]);

  // Agrupa quantidade por material (usado na validaÃ§Ã£o)
  const totalsByMaterial = items.reduce((acc, item) => {
    acc[item.material] = (acc[item.material] || 0) + item.quantity;
    return acc;
  }, {});

  const handleCheckout = () => {
    clearNotifications();

    const shortages = Object.entries(totalsByMaterial)
      .filter(([_, qty]) => qty < 5)
      .map(([material, qty]) => ({ material, missing: 5 - qty }));

    if (shortages.length === 0) {
      router.push("/checkout");
    } else {
      shortages.forEach(({ material, missing }) =>
        addNotification(
          <>
            <div className="text-[0.9rem]">
              <span className="text-[#dadada]">
                Falta{missing > 1 ? "m" : ""}
              </span>{" "}
              <span className="font-bold">{missing}</span>{" "}
              <span className="text-[#dadada]">
                unidade
                {missing > 1 ? "s" : ""} de
              </span>{" "}
              <span className="font-bold">{material}</span>
            </div>
          </>
        )
      );
    }
  };

  useEffect(() => {
    if (notifications.length > 0) {
      clearNotifications();

      const shortages = Object.entries(totalsByMaterial)
        .filter(([_, qty]) => qty < 5)
        .map(([material, qty]) => ({ material, missing: 5 - qty }));

      shortages.forEach(({ material, missing }) =>
        addNotification(
          <>
            <div className="text-[0.9rem]">
              <span className="text-[#dadada]">
                Falta{missing > 1 ? "m" : ""}
              </span>{" "}
              <span className="font-bold">{missing}</span>{" "}
              <span className="text-[#dadada]">
                unidade
                {missing > 1 ? "s" : ""} de
              </span>{" "}
              <span className="font-bold">{material}</span>
            </div>
          </>
        )
      );
    }
  }, [items, clearNotifications, addNotification, notifications.length]);

  return (
    <>
      <div
        className={`
          fixed bottom-0 left-0 right-0
          grid grid-cols-12 items-center
          bg-[#1A1A1A]/70 backdrop-blur-lg
          h-[9vh]
          border-t border-white/10
          px-[3vh] py-[0] z-50
          transform transition-transform duration-500 ease-out
          ${visible ? "translate-y-0" : "translate-y-full"}
        `}
      >
        <div className="col-span-12 flex justify-center select-none">
          <button
            onClick={handleCheckout}
            className="
              bg-gradient-to-r from-[#0a0a0a] to-[#2a2a2a]
              hover:from-[#0a0a0a] hover:to-[#4a4a4a]
              text-[#D4AF37] text-[3vh] font-semibold
              py-[1vh] px-[4vh] rounded-[1.5vh] w-[40vh]
              cursor-pointer
              shadow-[0_0_0.4vh_#A8760B] hover:shadow-[0_0_2vh_#A8760B]
              transform transition-all duration-200
              hover:-translate-y-[0.05vh] active:translate-y-[0.05vh] active:scale-95
            "
            aria-label="Finalizar Pedido"
          >
            ğŸ”ª Finalizar Pedido!
          </button>
        </div>
      </div>

      <NotificationDialog
        notifications={notifications}
        clear={clearNotifications}
      />
    </>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/FullHoverZoom.jsx ===
"use client";
import React, { useState, useRef } from "react";
import Image from "next/image";

export default function FullHoverZoom({ src, alt, zoom = 2 }) {
  const [zoomed, setZoomed] = useState(false);
  const [origin, setOrigin] = useState({ x: 50, y: 50 });
  const containerRef = useRef(null);

  const handleMouseMove = (e) => {
    const rect = containerRef.current.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    setOrigin({ x, y });
  };

  return (
    <div
      ref={containerRef}
      className="relative w-full aspect-[1000/400] overflow-hidden cursor-zoom-in rounded-lg"
      onMouseEnter={() => setZoomed(true)}
      onMouseMove={(e) => zoomed && handleMouseMove(e)}
      onMouseLeave={() => setZoomed(false)}
    >
      <Image
        src={src}
        alt={alt}
        fill
        className="object-cover rounded-lg"
        style={{
          transform: zoomed ? `scale(${zoom})` : "scale(1)",
          transformOrigin: `${origin.x}% ${origin.y}%`,
          transition: "transform 1s ease",
        }}
      />
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/NavBar.jsx ===
// src/components/NavBar.jsx
"use client";
import React from "react";
import { Sidebar, ShoppingCart } from "lucide-react";
import { useCart } from "@/context/CartContext";

export default function NavBar({ onToggleDrawer, onToggleCart }) {
  const { items } = useCart();
  // soma todas as quantidades
  const totalQuantity = items.reduce((sum, item) => sum + item.quantity, 0);

  return (
    <header className="fixed grid min-h-[5vw] grid-cols-3 items-center justify-items-center top-0 left-0 right-0 bg-[#1A1A1A]/70 backdrop-blur-lg border-b border-white/10 px-[2vw] z-50 select-none">
      {/* Ãndice */}
      <div className="col-span-1 h-[100%]  justify-self-start">
        <button
          onClick={onToggleDrawer}
          aria-label="Abrir menu"
          className="flex items-center cursor-pointer  h-[100%]"
        >
          <Sidebar className="h-[auto] w-[clamp(5vh,3rem,5vh)]" />
          <span className="ml-[max(0.2rem,1vw)] text-sm font-bold md:text-[clamp(3vh,2rem,3vh)] ">
            Ãndice
          </span>
        </button>
      </div>

      {/* Logo */}
      <div className="col-span-1 text-center justify-self-center ">
        <img
          src="/logo.png"
          alt="Logo do site"
          className="w-auto inline-block md:h-[clamp(9vh,5rem,9vh)]"
        />
      </div>

      {/* Carrinho */}
      <div className="col-span-1 flex justify-self-end h-[100%] max-h-[3rem]">
        <button
          onClick={onToggleCart}
          aria-label="Ver carrinho"
          className="relative flex items-center cursor-pointer h-[100%] pl-[4rem] py-6"
        >
          <span className="hidden md:inline mr-[1vw] text-[clamp(3vh,2rem,3vh)] font-bold">
            Carrinho
          </span>
          <div className="relative">
            <ShoppingCart className="h-[auto] w-[clamp(5vh,3rem,5vh)] text-white" />
            {totalQuantity > 0 && (
              <span
                className="
                  absolute -top-[1vh] -right-[1vh]
                  bg-[#D4AF37] text-[#1a1a1a] text-[clamp(2vh,1.5rem,2vh)] font-bold
                  rounded-full h-[auto] w-[clamp(3vh,2rem,3vh)] flex items-center justify-center
                "
              >
                {totalQuantity}
              </span>
            )}
          </div>
        </button>
      </div>
    </header>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/NotificationDialog.jsx ===
// src/components/NotificationDialog.jsx
"use client";

import React from "react";
import { createPortal } from "react-dom";
import { X } from "lucide-react";

export default function NotificationDialog({ notifications, clear }) {
  if (!notifications.length) return null;

  return createPortal(
    <div className="fixed bottom-20 w-80 left-1/2 transform -translate-x-1/2 z-50">
      <div className="max-w-md bg-[#1A1A1A]/70 backdrop-blur-lg text-white rounded-lg border border-white/20 shadow-lg overflow-hidden">
        {/* CabeÃ§alho fixo */}
        <div className="flex items-center justify-between px-4 py-2 border-b border-white/20">
          <span className="text-[1rem] font-semibold">
            âš ï¸ &nbsp;Pedido MÃ­nimo
          </span>
          <button onClick={clear} aria-label="Fechar" className="p-1">
            <X className="cursor-pointer h-6 w-6" />
          </button>
        </div>

        {/* Lista completa sempre visÃ­vel */}
        <div className="px-4 py-2 space-y-1 text-xs">
          {notifications.map((n, index) => (
            <div key={`${n.id}-${index}`} className="flex items-start">
              <span className="mr-2">â€¢</span>
              <span className="flex-1">{n.text}</span>
            </div>
          ))}
          <div className="mt-2 text-yellow-300">
            * Apenas o material conta. Modelo nÃ£o interfere.
          </div>
        </div>
      </div>
    </div>,
    document.body
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/AddToCartButton.jsx ===
// src/components/AddToCartButton.jsx
"use client";

import React, { useState } from "react";
import { ShoppingCart } from "lucide-react";
import CartChangeToast from "../CartChangeToast";

export default function AddToCartButton({ onClick, disabled }) {
  const [toast, setToast] = useState(null);

  const handleClick = () => {
    if (disabled) {
      setToast({ message: "Selecione algum produto!", type: "alert" });
      return;
    }
    if (onClick) onClick();
    setToast({ message: "Produto adicionado ao carrinho!", type: "success" });
  };

  return (
    <>
      <button
        type="button"
        onClick={handleClick}
        className={`
          mt-auto py-2 sm:py-3 px-3 sm:px-6
          bg-gradient-to-r from-[#D4AF37] to-[#A8760B]
          hover:from-[#CFAF37] hover:to-[#B8860B]
          text-[#1a1a1a] font-semibold rounded-xl shadow-md
          transition flex items-center justify-center space-x-2
          text-base sm:text-lg font-bold
          ${disabled ? "cursor-default" : "cursor-pointer"}
        `}
      >
        <ShoppingCart className="h-6 w-6" />
        <span>Adicionar ao carrinho</span>
      </button>

      {toast && (
        <CartChangeToast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/ImageZoom.jsx ===
"use client";
import React from "react";
import { PhotoProvider, PhotoView } from "react-photo-view";
import "react-photo-view/dist/react-photo-view.css";
import FullHoverZoom from "../FullHoverZoom";
import ZoomToolbar from "./ZoomToolbar";

export default function ImageZoom({ src, alt, zoom }) {
  return (
    <PhotoProvider
      maskOpacity={0.3}
      maskClassName="bg-black bg-opacity-30 backdrop-blur-sm"
      toolbarRender={ZoomToolbar}
    >
      <PhotoView src={src} key={src}>
        <div className="cursor-zoom-in">
          <FullHoverZoom src={src} alt={alt} zoom={zoom} />
        </div>
      </PhotoView>
    </PhotoProvider>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/ProductCard.jsx ===
// src/components/ProductCard/ProductCard.jsx
"use client";

import React, { useState } from "react";
import ImageZoom from "./ImageZoom";
import VariantsTable from "./VariantsTable";
import AddToCartButton from "./AddToCartButton";
import { useCart } from "@/context/CartContext";

export default function ProductCard({ product, observeRef }) {
  const [selectedVariants, setSelectedVariants] = useState([]);
  const [quantities, setQuantities] = useState(() =>
    product.variants.reduce((acc, v) => ({ ...acc, [v.sku]: 0 }), {})
  );
  const { addItem } = useCart();

  const toggleVariant = (sku) =>
    setSelectedVariants((prev) =>
      prev.includes(sku) ? prev.filter((s) => s !== sku) : [...prev, sku]
    );

  const changeQuantity = (sku, val) =>
    setQuantities((prev) => ({ ...prev, [sku]: val }));

  const handleAddToCart = () => {
    selectedVariants.forEach((sku) => {
      const qty = quantities[sku];
      if (qty <= 0) return;
      const variant = product.variants.find((v) => v.sku === sku);
      addItem({
        id: product.id,
        sku,
        title: product.title,
        price: variant.price,
        quantity: qty,
        image: product.imageUrl,
        material: variant.material,
      });
    });

    setSelectedVariants([]);
  };
  const isDisabled =
    selectedVariants.filter((sku) => quantities[sku] > 0).length === 0;

  return (
    <div
      ref={observeRef}
      className="
        select-none bg-[#1a1a1a] border border-[#2a2a2a] rounded-2xl shadow-lg
        w-full max-w-full sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl
        mx-auto p-3 sm:p-6 flex flex-col gap-2 sm:gap-3
      "
    >
      {product.imageUrl && (
        <ImageZoom src={product.imageUrl} alt={product.title} zoom={2} />
      )}

      <h2 className="text-base sm:text-xl font-semibold text-white text-center whitespace-nowrap">
        {product.title}
      </h2>

      <VariantsTable
        variants={product.variants}
        selectedVariants={selectedVariants}
        toggleVariant={toggleVariant}
        quantities={quantities}
        changeQuantity={changeQuantity}
      />

      <AddToCartButton onClick={handleAddToCart} disabled={isDisabled} />
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/VariantRow.jsx ===
// src/components/ProductCard/VariantRow.jsx
import React from "react";

export default function VariantRow({
  variant,
  checked,
  toggle,
  quantity,
  onQuantityChange,
}) {
  const handleToggle = () => {
    if (!checked && quantity === 0) {
      onQuantityChange(1);
    }
    toggle();
  };

  const handleQtyChange = (raw) => {
    // sÃ³ dÃ­gitos, atÃ© 3 chars
    const digits = String(raw).replace(/\D/g, "").slice(0, 3);
    // remove zeros Ã  esquerda, mas deixa "0" se tudo for zero
    const clean = digits.replace(/^0+/, "") || "0";
    const num = Math.min(999, parseInt(clean, 10));
    onQuantityChange(num);
    // apenas ativa o checkbox se quantidade > 0
    if (num > 0 && !checked) toggle();
    if (num === 0 && checked) toggle(); // Se quantidade = 0 e checkbox marcado, desmarca
  };

  const decrement = () => handleQtyChange(quantity - 1);
  const increment = () => handleQtyChange(quantity + 1);
  const handleInput = (e) => handleQtyChange(e.target.value);

  // ajusta font-size conforme dÃ­gitos
  const len = String(quantity).length;
  const fontSize = len === 1 ? "1rem" : len === 2 ? "0.9rem" : "0.8rem";

  return (
    <tr className="odd:bg-transparent even:bg-[#1f1f1f]">
      {/* Checkbox */}
      <td className="w-[10%] pt-2 pb-0 border-t border-[#00000040] text-center cursor-pointer">
        <input
          type="checkbox"
          checked={checked}
          onChange={handleToggle}
          className="h-6 w-6 accent-[#D4AF37] bg-[#1A1A1A] border border-[#00000040] rounded"
        />
      </td>

      {/* Material */}
      <td
        className="w-[45%] px-2 py-0 border-t border-[#00000040] text-left text-[#DADADA] font-bold cursor-pointer"
        onClick={handleToggle}
      >
        {variant.material}
      </td>

      {/* PreÃ§o */}
      <td className="w-[20%] px-2 py-0 border-t border-[#00000040] text-left text-[#EAEAEA]">
        R$ {variant.price.toFixed(2)}
      </td>

      {/* Quantidade */}
      <td className="w-[25%] px-2 py-0 border-t border-[#00000040] text-center">
        <div className="inline-flex items-center border border-[#00000040] bg-[#1A1A1A] rounded">
          <button
            type="button"
            onClick={decrement}
            disabled={quantity <= 0}
            className="
              h-6 w-6 flex items-center justify-center
              text-white font-bold rounded-none
              border-r border-[#2A2A2A] cursor-pointer
              disabled:opacity-10 disabled:hover:bg-[#1A1A1A] disabled:pointer-events-none
              hover:bg-[#3a3a3a] hover:rounded
            "
          >
            â€“
          </button>

          <input
            type="text"
            inputMode="numeric"
            pattern="\d*"
            value={quantity}
            onChange={handleInput}
            maxLength={3}
            style={{ fontSize }}
            className={
              `w-8 h-6 bg-transparent text-center p-0 focus:outline-none focus:ring-2 focus:ring-yellow-400 ` +
              (quantity > 0 ? "text-[#DADADA]" : "text-[gray]/30")
            }
          />

          <button
            type="button"
            onClick={increment}
            disabled={quantity >= 999}
            className="
              h-6 w-6 flex items-center justify-center cursor-pointer
              text-white font-bold rounded-none
              border-l border-[#2A2A2A]
              disabled:opacity-50 disabled:cursor-not-allowed
              hover:bg-[#272727] hover:rounded
            "
          >
            +
          </button>
        </div>
      </td>
    </tr>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/VariantsTable.jsx ===
import React from "react";
import VariantRow from "./VariantRow";

export default function VariantsTable({
  variants,
  selectedVariants,
  toggleVariant,
  quantities,
  changeQuantity,
}) {
  return (
    <div className="overflow-hidden rounded-lg border border-[#00000040]">
      <table
        className="
          w-full
          text-[#B3B3B3]
          table-auto
          border-separate border-spacing-0
        "
      >
        <thead className="bg-[#2A2A2A]">
          <tr>
            <th className="w-[5%] px-2 py-0 text-center text-md font-bold" />
            <th className="w-[40%] px-2 py-0 text-left text-md font-bold">
              Material
            </th>
            <th className="w-[25%] px-2 py-0 text-left text-md font-bold">
              PreÃ§o
            </th>
            <th className="w-[20%] px-2 py-0 text-center text-md font-bold">
              Qtde.
            </th>
          </tr>
        </thead>
        <tbody>
          {variants.map((v, i) => (
            <VariantRow
              key={v.sku}
              variant={v}
              checked={selectedVariants.includes(v.sku)}
              toggle={() => toggleVariant(v.sku)}
              quantity={quantities[v.sku]}
              onQuantityChange={(val) => changeQuantity(v.sku, val)}
              // adiciona classes especiais no Ãºltimo row para garantir os cantos
              className={`
                ${i % 2 === 0 ? "bg-[#1E1E1E]" : ""}
                ${i === variants.length - 1 ? "last:rounded-bl-lg last:rounded-br-lg" : ""}
              `}
            />
          ))}
        </tbody>
      </table>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductCard/ZoomToolbar.jsx ===
import React from "react";

export default function ZoomToolbar({ scale, onScale, onClose }) {
  return (
    <div
      className="
      fixed bottom-8
      left-1/2 transform -translate-x-1/2
      flex space-x-2 md:space-x-4 z-50
    "
    >
      <button
        onClick={() => onScale(scale - 0.2)}
        className="
          w-12 h-12
          bg-[#000000] hover:bg-[#303030]
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        âˆ’
      </button>
      <button
        onClick={() => onScale(scale + 0.2)}
        className="
          w-12 h-12
          bg-[#000000] hover:bg-[#303030]
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        +
      </button>
      <button
        onClick={onClose}
        className="
          w-12 h-12
          bg-red-400 hover:bg-red-500
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        Ã—
      </button>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/ProductsSection.jsx ===
"use client";
import React from "react";
import useProducts from "@/hooks/useProducts";
import ProductCard from "./ProductCard/ProductCard";
import { ArrowBigUpDash } from "lucide-react";

export default function ProductsSection({ selectedCategory }) {
  const { products, lastRef, isValidating, isReachingEnd, error } =
    useProducts(selectedCategory);

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  };

  return (
    <section className="bg-[#252525] bg-opacity-90 backdrop-blur-sm rounded-xl p-2 sm:p-6 shadow-lg">
      <div className="grid grid-cols-1 [@media_(min-width:857px)]:grid-cols-2 gap-6">
        {products.map((product, idx) => (
          <ProductCard
            key={product.id}
            product={product}
            observeRef={idx === products.length - 1 ? lastRef : null}
          />
        ))}
      </div>

      {isValidating && (
        <p className="text-center text-gray-500 mt-20 h-[50vh] text-6xl select-none">
          âŸ³
        </p>
      )}

      {isReachingEnd && !isValidating && (
        <button
          onClick={scrollToTop}
          aria-label="Voltar ao topo"
          className="flex items-center cursor-pointer h-[100%] justify-center mt-8 mx-auto border rounded-lg p-2 text-gray-500 select-none"
        >
          <span className="text-base font-bold text-lg mr-1">
            Voltar ao topo
          </span>
          <ArrowBigUpDash className="h-6 w-6" />
        </button>
      )}

      {error && (
        <p className="text-red-400 text-center mt-20 h-[50vh] text-2xl select-none cursor-pointer">
          Oops, algo deu errado.
        </p>
      )}
    </section>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/components/SideDrawer.jsx ===
// SideDrawer.jsx
"use client";
import React from "react";
import SimpleBar from "simplebar-react";
import "simplebar-react/dist/simplebar.min.css";

export default function SideDrawer({
  isOpen,
  onClose,
  categories,
  selectedCategory,
  setSelectedCategory,
}) {
  return (
    <div
      className={`z-40 fixed inset-0 ${isOpen ? "" : "pointer-events-none"}`}
      onClick={onClose}
    >
      <aside
        onClick={(e) => e.stopPropagation()}
        className={`
          fixed top-[8vh] left-0
          h-[100%] w-30 min-w-[25vh] max-w-[10rem] 
          bg-[#1A1A1A]/70 backdrop-blur-lg
          border-r border-white/10
          origin-left transform transition-transform duration-350 md:top-[10vh] min-w-[30vh]
          ${isOpen ? "scale-x-100" : "scale-x-0"}
        `}
      >
        <button
          onClick={onClose}
          aria-label="Fechar menu"
          className="cursor-pointer absolute top-[1vh] right-[1vh] text-white text-[4vh] focus:outline-none"
        >
          Ã—
        </button>

        <SimpleBar
          style={{ maxHeight: "100%" }}
          className="mt-[6vh] pl-[1vh] pr-[3vh] pb-[20vh] scroll-smooth font-roboto"
        >
          <nav className="space-y-[0.5vh] ">
            {categories.map((cat) => (
              <button
                key={cat}
                onClick={() => {
                  setSelectedCategory(cat);
                  onClose();
                }}
                className={`
                  w-full h-[6vh] text-left py-[1vh] pl-[1vh] text-[2.5vh]
                  cursor-pointer
                  border-b-[0.1vh] border-[#60606050] last:border-none
                  transition-transform duration-200
                  ${
                    cat === selectedCategory
                      ? "bg-[#D4AF37]  font-bold text-[#1a1a1a]"
                      : "text-[#bbbbbb] hover:text-white hover:translate-x-2"
                  }
                `}
              >
                {cat}
              </button>
            ))}
          </nav>
        </SimpleBar>
      </aside>
    </div>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/context/CartContext.jsx ===
// src/context/CartContext.jsx
"use client";
import React, { createContext, useReducer, useContext, useEffect } from "react";

const CartContext = createContext();

const initialState = { items: [] };

function cartReducer(state, action) {
  switch (action.type) {
    case "INIT":
      return action.payload;
    case "ADD_ITEM": {
      const { sku, quantity, ...rest } = action.payload;
      const exists = state.items.find((item) => item.sku === sku);
      if (exists) {
        return {
          items: state.items.map((item) =>
            item.sku === sku
              ? { ...item, quantity: item.quantity + quantity }
              : item
          ),
        };
      }
      return { items: [...state.items, { sku, quantity, ...rest }] };
    }
    case "REMOVE_ITEM":
      return {
        items: state.items.filter((item) => item.sku !== action.payload.sku),
      };
    case "CLEAR_CART":
      return { items: [] };
    default:
      return state;
  }
}

export function CartProvider({ children }) {
  const [state, dispatch] = useReducer(cartReducer, initialState);

  // inicializa do localStorage
  useEffect(() => {
    const stored = localStorage.getItem("cart");
    if (stored) dispatch({ type: "INIT", payload: JSON.parse(stored) });
  }, []);

  // persiste no localStorage
  useEffect(() => {
    localStorage.setItem("cart", JSON.stringify(state));
  }, [state]);

  const addItem = (item) => dispatch({ type: "ADD_ITEM", payload: item });
  const removeItem = (sku) =>
    dispatch({ type: "REMOVE_ITEM", payload: { sku } });
  const clearCart = () => dispatch({ type: "CLEAR_CART" });

  // Calcular o total dos itens
  const total = state.items.reduce(
    (acc, item) => acc + item.price * item.quantity,
    0
  );

  return (
    <CartContext.Provider
      value={{ items: state.items, addItem, removeItem, clearCart, total }} // Total Ã© agora acessÃ­vel diretamente
    >
      {children}
    </CartContext.Provider>
  );
}

export function useCart() {
  return useContext(CartContext);
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/context/NotificationsContext.jsx ===
// src/context/NotificationsContext.jsx
"use client";

import React, { createContext, useContext, useState } from "react";

const NotificationsContext = createContext();

export function NotificationsProvider({ children }) {
  const [notifications, setNotifications] = useState([]);

  const addNotification = (text) =>
    setNotifications((prev) => [...prev, { id: Date.now(), text }]);

  const clearNotifications = () => setNotifications([]);

  return (
    <NotificationsContext.Provider
      value={{ notifications, addNotification, clearNotifications }}
    >
      {children}
    </NotificationsContext.Provider>
  );
}

export const useNotifications = () => useContext(NotificationsContext);

=== /home/ikemh/projetos/my-ecommerce/frontend/src/context/ProductSelectContext.js ===
// src/context/ProductSelectionContext.js
"use client";

import React, { createContext, useContext, useState } from "react";

// Criando o contexto
const ProductSelectionContext = createContext();

// Hook personalizado para facilitar o uso do contexto
export function useProductSelection() {
  return useContext(ProductSelectionContext);
}

// Provedor do contexto
export function ProductSelectionProvider({ children }) {
  const [selectedVariants, setSelectedVariants] = useState([]);

  // Adiciona uma variante Ã  seleÃ§Ã£o
  const addVariant = (variantId) => {
    setSelectedVariants((prev) => {
      if (!prev.includes(variantId)) {
        return [...prev, variantId];
      }
      return prev;
    });
  };

  // Remove uma variante da seleÃ§Ã£o
  const removeVariant = (variantId) => {
    setSelectedVariants((prev) => prev.filter((id) => id !== variantId));
  };

  // Verifica se hÃ¡ variantes selecionadas
  const hasSelectedVariants = () => {
    return selectedVariants.length > 0;
  };

  // Valor do contexto
  const value = {
    selectedVariants,
    addVariant,
    removeVariant,
    hasSelectedVariants,
  };

  return (
    <ProductSelectionContext.Provider value={value}>
      {children}
    </ProductSelectionContext.Provider>
  );
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/globals.css ===
@tailwind base;
@tailwind components;
@tailwind utilities;

@import "simplebar/dist/simplebar.min.css";

.simplebar-track.simplebar-vertical {
  width: 6px;
}
.simplebar-scrollbar:before {
  background-color: #999;
  border-radius: 3px;
}
.simplebar-track.simplebar-vertical .simplebar-scrollbar:before {
  opacity: 1;
}

::selection {
  background: #000000;
  color: #ffffff;
}

::-moz-selection {
  background: #000000;
  color: #ffffff;
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/hooks/useCategories.js ===
import { useState, useEffect } from "react";

const apiUrl = process.env.NEXT_PUBLIC_API_URL;

export default function useCategories(pageSize = 100) {
  const [categories, setCategories] = useState([]);
  const [selectedCategory, setSelectedCategory] = useState("");
  const [error, setError] = useState(null);

  useEffect(() => {
    if (!apiUrl) {
      const msg = "âŒ NEXT_PUBLIC_API_URL nÃ£o estÃ¡ definida";
      console.error(msg);
      setError(msg);
      return;
    }

    const url = `${apiUrl}/api/categorias?pagination[pageSize]=${pageSize}&sort=id:asc`;
    console.log("ğŸ” Fetching categorias from:", url);

    fetch(url)
      .then((res) => {
        if (!res.ok) {
          throw new Error(`Erro HTTP ${res.status}`);
        }
        return res.json();
      })
      .then((j) => {
        const cats = j.data.map((c) => c.nome);
        setCategories(cats);
        if (cats.length > 0) setSelectedCategory(cats[0]);
        setError(null);
      })
      .catch((e) => {
        console.error("âŒ Erro ao buscar categorias:", e);
        setError(e.message || "Erro desconhecido");
      });
  }, [pageSize]);

  return { categories, selectedCategory, setSelectedCategory, error };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/hooks/useNotifications.js ===
// src/hooks/useNotifications.js
"use client";

import { useState, useCallback } from "react";

export function useNotifications(max = 7) {
  const [list, setList] = useState([]);

  const add = useCallback(
    (text) => {
      setList((prev) => {
        const newNotification = {
          // gera um UUID nativo (fallback para timestamp+random se nÃ£o suportado)
          id:
            typeof crypto !== "undefined" && crypto.randomUUID
              ? crypto.randomUUID()
              : `${Date.now()}-${Math.random()}`,
          text,
        };
        return [...prev, newNotification].slice(-max);
      });
    },
    [max]
  );

  const clear = useCallback(() => setList([]), []);

  return { list, add, clear };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/hooks/usePhoneInput.js ===
// hooks/usePhoneInput.js
import { useState, useRef, useEffect } from "react";
import {
  initPhoneInput,
  validatePhoneBR,
} from "@/components/CheckoutLayout/utils/phoneUtils";

export function usePhoneInput(onChange) {
  const ref = useRef(null);
  const [valid, setValid] = useState(null);

  useEffect(() => {
    if (!ref.current) return;
    const cleanup = initPhoneInput(ref, onChange);
    return cleanup;
  }, [onChange]);

  useEffect(() => {
    const val = ref.current?.value || "";
    setValid(validatePhoneBR(val).valid);
  }, [ref.current?.value]);

  return { ref, valid };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/hooks/useProducts.js ===
import { useRef, useCallback, useEffect } from "react";
import useSWRInfinite from "swr/infinite";
import { fetcher } from "@/lib/fetcher";

const PAGE_SIZE = 12;
const apiUrl = process.env.NEXT_PUBLIC_API_URL;

export default function useProducts(selectedCategory) {
  const getKey = (pageIndex, previousPage) => {
    if (!selectedCategory) return null;
    if (previousPage && previousPage.data.length < PAGE_SIZE) return null;
    return (
      `${apiUrl}/api/produtos?populate=*&` +
      `filters[categoria][nome][$eq]=${encodeURIComponent(selectedCategory)}` +
      `&sort=id:asc&pagination[page]=${pageIndex + 1}` +
      `&pagination[pageSize]=${PAGE_SIZE}`
    );
  };

  const { data, size, setSize, isValidating, error } = useSWRInfinite(
    getKey,
    fetcher
  );

  const products = data
    ? data.flatMap((page) =>
        page.data.map((p) => ({
          id: p.id,
          title: p.title,
          imageUrl: p.image?.url || p.image?.formats?.medium?.url || "",
          variants: p.variants.map((v) => ({
            sku: v.sku,
            material: v.material,
            price: v.price,
          })),
        }))
      )
    : [];

  const isReachingEnd = data && data[data.length - 1].data.length < PAGE_SIZE;

  const observer = useRef();
  const lastRef = useCallback(
    (node) => {
      if (isValidating || isReachingEnd) return;
      if (observer.current) observer.current.disconnect();
      observer.current = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          setSize(size + 1);
        }
      });
      if (node) observer.current.observe(node);
    },
    [isValidating, isReachingEnd, size, setSize]
  );

  useEffect(() => {
    if (selectedCategory) setSize(1);
  }, [selectedCategory]);

  return {
    products,
    lastRef,
    isValidating,
    isReachingEnd,
    error,
  };
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/hooks/useValidation.js ===

=== /home/ikemh/projetos/my-ecommerce/frontend/src/lib/fetcher.js ===
export const fetcher = (url) => fetch(url).then((res) => res.json());

=== /home/ikemh/projetos/my-ecommerce/frontend/src/lib/googleSheets.js ===
// src/lib/googleSheets.js
import { google } from "googleapis";
import { OAuth2Client } from "google-auth-library";

const auth = new OAuth2Client({
  email: process.env.GOOGLE_CLIENT_EMAIL,
  key: process.env.GOOGLE_PRIVATE_KEY,
  scopes: ["https://www.googleapis.com/auth/spreadsheets"],
});

const sheets = google.sheets({ version: "v4", auth });

export async function appendToSheet(data) {
  const spreadsheetId = process.env.GOOGLE_SHEET_ID;
  const range = "Sheet1!A1"; // Alterar conforme a necessidade
  const valueInputOption = "RAW";

  const resource = {
    values: [data],
  };

  try {
    const response = await sheets.spreadsheets.values.append({
      spreadsheetId,
      range,
      valueInputOption,
      resource,
    });
    return response.data;
  } catch (error) {
    console.error("Error appending to sheet:", error);
    throw new Error("Failed to append data to Google Sheets");
  }
}

=== /home/ikemh/projetos/my-ecommerce/frontend/src/output.txt ===
=== ./app/checkout/page.jsx ===
// src/app/checkout/page.jsx

"use client";
import React, { useState } from "react";
import { useCart } from "@/context/CartContext";
import { useRouter } from "next/navigation";
import CheckoutLayout from "@/components/CheckoutLayout/CheckoutLayout";

export default function CheckoutPage() {
  const { items, clearCart } = useCart();
  const router = useRouter();

  const [customer, setCustomer] = useState("");
  const [email, setEmail] = useState("");
  const [phone, setPhone] = useState("");
  const [loading, setLoading] = useState(false);

  // FunÃ§Ãµes para atualizar os valores dos estados
  const handleCustomerChange = (value) => setCustomer(value);
  const handleEmailChange = (value) => setEmail(value);
  const handlePhoneChange = (value) => setPhone(value);

  // CÃ¡lculo do total
  const total = items.reduce(
    (sum, item) => sum + item.price * item.quantity,
    0
  );

  const handleSubmit = async (orderData) => {
    setLoading(true);

    try {
      const res = await fetch("/api/submitOrder", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(orderData),
      });
      const result = await res.json();
      alert(result.message);
      clearCart(); // Limpa o carrinho apÃ³s sucesso
      router.push("/success"); // Redireciona para pÃ¡gina de sucesso
    } catch (error) {
      alert("Erro ao enviar pedido.");
      console.error(error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <CheckoutLayout
      items={items}
      total={total}
      customer={customer}
      email={email}
      phone={phone}
      loading={loading}
      onCustomerChange={handleCustomerChange}
      onEmailChange={handleEmailChange}
      onPhoneChange={handlePhoneChange}
      onSubmit={handleSubmit} // Passando a funÃ§Ã£o de submit para o CheckoutLayout
    />
  );
}

=== ./app/success/page.jsx ===
export default function SuccessPage() {
  return (
    <div className="min-h-screen flex flex-col items-center justify-center text-white bg-[#202020]">
      <h1 className="text-3xl mb-4">Pedido enviado com sucesso!</h1>
      <p>Em breve entraremos em contato via WhatsApp.</p>
    </div>
  );
}

=== ./components/ProductsSection.jsx ===
"use client";
import React from "react";
import useProducts from "@/hooks/useProducts";
import ProductCard from "./ProductCard/ProductCard";
import { ArrowBigUpDash } from "lucide-react";

export default function ProductsSection({ selectedCategory }) {
  const { products, lastRef, isValidating, isReachingEnd, error } =
    useProducts(selectedCategory);

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  };

  return (
    <section className="bg-[#252525] bg-opacity-90 backdrop-blur-sm rounded-xl p-2 sm:p-6 shadow-lg">
      <div className="grid grid-cols-1 [@media_(min-width:857px)]:grid-cols-2 gap-6">
        {products.map((product, idx) => (
          <ProductCard
            key={product.id}
            product={product}
            observeRef={idx === products.length - 1 ? lastRef : null}
          />
        ))}
      </div>

      {isValidating && (
        <p className="text-center text-gray-500 mt-20 h-[50vh] text-6xl select-none">
          âŸ³
        </p>
      )}

      {isReachingEnd && !isValidating && (
        <button
          onClick={scrollToTop}
          aria-label="Voltar ao topo"
          className="flex items-center cursor-pointer h-[100%] justify-center mt-8 mx-auto border rounded-lg p-2 text-gray-500 select-none"
        >
          <span className="text-base font-bold text-lg mr-1">
            Voltar ao topo
          </span>
          <ArrowBigUpDash className="h-6 w-6" />
        </button>
      )}

      {error && (
        <p className="text-red-400 text-center mt-20 h-[50vh] text-2xl select-none cursor-pointer">
          Oops, algo deu errado.
        </p>
      )}
    </section>
  );
}

=== ./components/CategoriesNav.jsx ===
"use client";
import React from "react";

export default function CategoriesNav({
  categories,
  selectedCategory,
  onSelectCategory,
}) {
  return (
    <nav className="hidden md:block fixed top-1/3 right-6 bg-[#1A1A1A] bg-opacity-80 p-4 rounded-lg shadow-lg z-50">
      <ul className="space-y-2">
        {categories.map((cat) => (
          <li key={cat}>
            <button
              onClick={() => onSelectCategory(cat)}
              className={`text-sm ${
                cat === selectedCategory
                  ? "text-white font-bold"
                  : "text-[#B3B3B3] hover:text-white"
              }`}
            >
              {cat}
            </button>
          </li>
        ))}
      </ul>
    </nav>
  );
}

=== ./components/NavBar.jsx ===
// src/components/NavBar.jsx
"use client";
import React from "react";
import { Sidebar, ShoppingCart } from "lucide-react";
import { useCart } from "@/context/CartContext";

export default function NavBar({ onToggleDrawer, onToggleCart }) {
  const { items } = useCart();
  // soma todas as quantidades
  const totalQuantity = items.reduce((sum, item) => sum + item.quantity, 0);

  return (
    <header className="fixed grid min-h-[5vw] grid-cols-3 items-center justify-items-center top-0 left-0 right-0 bg-[#1A1A1A]/70 backdrop-blur-lg border-b border-white/10 px-[2vw] z-50 select-none">
      {/* Ãndice */}
      <div className="col-span-1 h-[100%]  justify-self-start">
        <button
          onClick={onToggleDrawer}
          aria-label="Abrir menu"
          className="flex items-center cursor-pointer  h-[100%]"
        >
          <Sidebar className="h-[auto] w-[clamp(5vh,3rem,5vh)]" />
          <span className="ml-[max(0.2rem,1vw)] text-sm font-bold md:text-[clamp(3vh,2rem,3vh)] ">
            Ãndice
          </span>
        </button>
      </div>

      {/* Logo */}
      <div className="col-span-1 text-center justify-self-center ">
        <img
          src="/logo.png"
          alt="Logo do site"
          className="w-auto inline-block md:h-[clamp(9vh,5rem,9vh)]"
        />
      </div>

      {/* Carrinho */}
      <div className="col-span-1 flex justify-self-end h-[100%] max-h-[3rem]">
        <button
          onClick={onToggleCart}
          aria-label="Ver carrinho"
          className="relative flex items-center cursor-pointer h-[100%] pl-[4rem] py-6"
        >
          <span className="hidden md:inline mr-[1vw] text-[clamp(3vh,2rem,3vh)] font-bold">
            Carrinho
          </span>
          <div className="relative">
            <ShoppingCart className="h-[auto] w-[clamp(5vh,3rem,5vh)] text-white" />
            {totalQuantity > 0 && (
              <span
                className="
                  absolute -top-[1vh] -right-[1vh]
                  bg-[#D4AF37] text-[#1a1a1a] text-[clamp(2vh,1.5rem,2vh)] font-bold
                  rounded-full h-[auto] w-[clamp(3vh,2rem,3vh)] flex items-center justify-center
                "
              >
                {totalQuantity}
              </span>
            )}
          </div>
        </button>
      </div>
    </header>
  );
}

=== ./components/SideDrawer.jsx ===
// SideDrawer.jsx
"use client";
import React from "react";
import SimpleBar from "simplebar-react";
import "simplebar-react/dist/simplebar.min.css";

export default function SideDrawer({
  isOpen,
  onClose,
  categories,
  selectedCategory,
  setSelectedCategory,
}) {
  return (
    <div
      className={`z-40 fixed inset-0 ${isOpen ? "" : "pointer-events-none"}`}
      onClick={onClose}
    >
      <aside
        onClick={(e) => e.stopPropagation()}
        className={`
          fixed top-[8vh] left-0
          h-[100%] w-30 min-w-[25vh] max-w-[10rem] 
          bg-[#1A1A1A]/70 backdrop-blur-lg
          border-r border-white/10
          origin-left transform transition-transform duration-350 md:top-[10vh] min-w-[30vh]
          ${isOpen ? "scale-x-100" : "scale-x-0"}
        `}
      >
        <button
          onClick={onClose}
          aria-label="Fechar menu"
          className="cursor-pointer absolute top-[1vh] right-[1vh] text-white text-[4vh] focus:outline-none"
        >
          Ã—
        </button>

        <SimpleBar
          style={{ maxHeight: "100%" }}
          className="mt-[6vh] pl-[1vh] pr-[3vh] pb-[20vh] scroll-smooth font-roboto"
        >
          <nav className="space-y-[0.5vh] ">
            {categories.map((cat) => (
              <button
                key={cat}
                onClick={() => {
                  setSelectedCategory(cat);
                  onClose();
                }}
                className={`
                  w-full h-[6vh] text-left py-[1vh] pl-[1vh] text-[2.5vh]
                  cursor-pointer
                  border-b-[0.1vh] border-[#60606050] last:border-none
                  transition-transform duration-200
                  ${
                    cat === selectedCategory
                      ? "bg-[#D4AF37]  font-bold text-[#1a1a1a]"
                      : "text-[#bbbbbb] hover:text-white hover:translate-x-2"
                  }
                `}
              >
                {cat}
              </button>
            ))}
          </nav>
        </SimpleBar>
      </aside>
    </div>
  );
}

=== ./components/FullHoverZoom.jsx ===
"use client";
import React, { useState, useRef } from "react";
import Image from "next/image";

export default function FullHoverZoom({ src, alt, zoom = 2 }) {
  const [zoomed, setZoomed] = useState(false);
  const [origin, setOrigin] = useState({ x: 50, y: 50 });
  const containerRef = useRef(null);

  const handleMouseMove = (e) => {
    const rect = containerRef.current.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    setOrigin({ x, y });
  };

  return (
    <div
      ref={containerRef}
      className="relative w-full aspect-[1000/400] overflow-hidden cursor-zoom-in rounded-lg"
      onMouseEnter={() => setZoomed(true)}
      onMouseMove={(e) => zoomed && handleMouseMove(e)}
      onMouseLeave={() => setZoomed(false)}
    >
      <Image
        src={src}
        alt={alt}
        fill
        className="object-cover rounded-lg"
        style={{
          transform: zoomed ? `scale(${zoom})` : "scale(1)",
          transformOrigin: `${origin.x}% ${origin.y}%`,
          transition: "transform 1s ease",
        }}
      />
    </div>
  );
}

=== ./components/ProductCard/ProductCard.jsx ===
// src/components/ProductCard/ProductCard.jsx
"use client";

import React, { useState } from "react";
import ImageZoom from "./ImageZoom";
import VariantsTable from "./VariantsTable";
import AddToCartButton from "./AddToCartButton";
import { useCart } from "@/context/CartContext";

export default function ProductCard({ product, observeRef }) {
  const [selectedVariants, setSelectedVariants] = useState([]);
  const [quantities, setQuantities] = useState(() =>
    product.variants.reduce((acc, v) => ({ ...acc, [v.sku]: 0 }), {})
  );
  const { addItem } = useCart();

  const toggleVariant = (sku) =>
    setSelectedVariants((prev) =>
      prev.includes(sku) ? prev.filter((s) => s !== sku) : [...prev, sku]
    );

  const changeQuantity = (sku, val) =>
    setQuantities((prev) => ({ ...prev, [sku]: val }));

  const handleAddToCart = () => {
    selectedVariants.forEach((sku) => {
      const qty = quantities[sku];
      if (qty <= 0) return;
      const variant = product.variants.find((v) => v.sku === sku);
      addItem({
        id: product.id,
        sku,
        title: product.title,
        price: variant.price,
        quantity: qty,
        image: product.imageUrl,
        material: variant.material,
      });
    });

    setSelectedVariants([]);
  };
  const isDisabled =
    selectedVariants.filter((sku) => quantities[sku] > 0).length === 0;

  return (
    <div
      ref={observeRef}
      className="
        select-none bg-[#1a1a1a] border border-[#2a2a2a] rounded-2xl shadow-lg
        w-full max-w-full sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl
        mx-auto p-3 sm:p-6 flex flex-col gap-2 sm:gap-3
      "
    >
      {product.imageUrl && (
        <ImageZoom src={product.imageUrl} alt={product.title} zoom={2} />
      )}

      <h2 className="text-base sm:text-xl font-semibold text-white text-center whitespace-nowrap">
        {product.title}
      </h2>

      <VariantsTable
        variants={product.variants}
        selectedVariants={selectedVariants}
        toggleVariant={toggleVariant}
        quantities={quantities}
        changeQuantity={changeQuantity}
      />

      <AddToCartButton onClick={handleAddToCart} disabled={isDisabled} />
    </div>
  );
}

=== ./components/ProductCard/ImageZoom.jsx ===
"use client";
import React from "react";
import { PhotoProvider, PhotoView } from "react-photo-view";
import "react-photo-view/dist/react-photo-view.css";
import FullHoverZoom from "../FullHoverZoom";
import ZoomToolbar from "./ZoomToolbar";

export default function ImageZoom({ src, alt, zoom }) {
  return (
    <PhotoProvider
      maskOpacity={0.3}
      maskClassName="bg-black bg-opacity-30 backdrop-blur-sm"
      toolbarRender={ZoomToolbar}
    >
      <PhotoView src={src} key={src}>
        <div className="cursor-zoom-in">
          <FullHoverZoom src={src} alt={alt} zoom={zoom} />
        </div>
      </PhotoView>
    </PhotoProvider>
  );
}

=== ./components/ProductCard/ZoomToolbar.jsx ===
import React from "react";

export default function ZoomToolbar({ scale, onScale, onClose }) {
  return (
    <div
      className="
      fixed bottom-8
      left-1/2 transform -translate-x-1/2
      flex space-x-2 md:space-x-4 z-50
    "
    >
      <button
        onClick={() => onScale(scale - 0.2)}
        className="
          w-12 h-12
          bg-[#000000] hover:bg-[#303030]
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        âˆ’
      </button>
      <button
        onClick={() => onScale(scale + 0.2)}
        className="
          w-12 h-12
          bg-[#000000] hover:bg-[#303030]
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        +
      </button>
      <button
        onClick={onClose}
        className="
          w-12 h-12
          bg-red-400 hover:bg-red-500
          text-white text-base text-lg
          rounded-full shadow-md
        "
      >
        Ã—
      </button>
    </div>
  );
}

=== ./components/ProductCard/VariantsTable.jsx ===
import React from "react";
import VariantRow from "./VariantRow";

export default function VariantsTable({
  variants,
  selectedVariants,
  toggleVariant,
  quantities,
  changeQuantity,
}) {
  return (
    <div className="overflow-hidden rounded-lg border border-[#00000040]">
      <table
        className="
          w-full
          text-[#B3B3B3]
          table-auto
          border-separate border-spacing-0
        "
      >
        <thead className="bg-[#2A2A2A]">
          <tr>
            <th className="w-[5%] px-2 py-0 text-center text-md font-bold" />
            <th className="w-[40%] px-2 py-0 text-left text-md font-bold">
              Material
            </th>
            <th className="w-[25%] px-2 py-0 text-left text-md font-bold">
              PreÃ§o
            </th>
            <th className="w-[20%] px-2 py-0 text-center text-md font-bold">
              Qtde.
            </th>
          </tr>
        </thead>
        <tbody>
          {variants.map((v, i) => (
            <VariantRow
              key={v.sku}
              variant={v}
              checked={selectedVariants.includes(v.sku)}
              toggle={() => toggleVariant(v.sku)}
              quantity={quantities[v.sku]}
              onQuantityChange={(val) => changeQuantity(v.sku, val)}
              // adiciona classes especiais no Ãºltimo row para garantir os cantos
              className={`
                ${i % 2 === 0 ? "bg-[#1E1E1E]" : ""}
                ${i === variants.length - 1 ? "last:rounded-bl-lg last:rounded-br-lg" : ""}
              `}
            />
          ))}
        </tbody>
      </table>
    </div>
  );
}

=== ./components/ProductCard/VariantRow.jsx ===
// src/components/ProductCard/VariantRow.jsx
import React from "react";

export default function VariantRow({
  variant,
  checked,
  toggle,
  quantity,
  onQuantityChange,
}) {
  const handleToggle = () => {
    if (!checked && quantity === 0) {
      onQuantityChange(1);
    }
    toggle();
  };

  const handleQtyChange = (raw) => {
    // sÃ³ dÃ­gitos, atÃ© 3 chars
    const digits = String(raw).replace(/\D/g, "").slice(0, 3);
    // remove zeros Ã  esquerda, mas deixa "0" se tudo for zero
    const clean = digits.replace(/^0+/, "") || "0";
    const num = Math.min(999, parseInt(clean, 10));
    onQuantityChange(num);
    // apenas ativa o checkbox se quantidade > 0
    if (num > 0 && !checked) toggle();
    if (num === 0 && checked) toggle(); // Se quantidade = 0 e checkbox marcado, desmarca
  };

  const decrement = () => handleQtyChange(quantity - 1);
  const increment = () => handleQtyChange(quantity + 1);
  const handleInput = (e) => handleQtyChange(e.target.value);

  // ajusta font-size conforme dÃ­gitos
  const len = String(quantity).length;
  const fontSize = len === 1 ? "1rem" : len === 2 ? "0.9rem" : "0.8rem";

  return (
    <tr className="odd:bg-transparent even:bg-[#1f1f1f]">
      {/* Checkbox */}
      <td className="w-[10%] pt-2 pb-0 border-t border-[#00000040] text-center cursor-pointer">
        <input
          type="checkbox"
          checked={checked}
          onChange={handleToggle}
          className="h-6 w-6 accent-[#D4AF37] bg-[#1A1A1A] border border-[#00000040] rounded"
        />
      </td>

      {/* Material */}
      <td
        className="w-[45%] px-2 py-0 border-t border-[#00000040] text-left text-[#DADADA] font-bold cursor-pointer"
        onClick={handleToggle}
      >
        {variant.material}
      </td>

      {/* PreÃ§o */}
      <td className="w-[20%] px-2 py-0 border-t border-[#00000040] text-left text-[#EAEAEA]">
        R$ {variant.price.toFixed(2)}
      </td>

      {/* Quantidade */}
      <td className="w-[25%] px-2 py-0 border-t border-[#00000040] text-center">
        <div className="inline-flex items-center border border-[#00000040] bg-[#1A1A1A] rounded">
          <button
            type="button"
            onClick={decrement}
            disabled={quantity <= 0}
            className="
              h-6 w-6 flex items-center justify-center
              text-white font-bold rounded-none
              border-r border-[#2A2A2A] cursor-pointer
              disabled:opacity-10 disabled:hover:bg-[#1A1A1A] disabled:pointer-events-none
              hover:bg-[#3a3a3a] hover:rounded
            "
          >
            â€“
          </button>

          <input
            type="text"
            inputMode="numeric"
            pattern="\d*"
            value={quantity}
            onChange={handleInput}
            maxLength={3}
            style={{ fontSize }}
            className={
              `w-8 h-6 bg-transparent text-center p-0 focus:outline-none focus:ring-2 focus:ring-yellow-400 ` +
              (quantity > 0 ? "text-[#DADADA]" : "text-[gray]/30")
            }
          />

          <button
            type="button"
            onClick={increment}
            disabled={quantity >= 999}
            className="
              h-6 w-6 flex items-center justify-center cursor-pointer
              text-white font-bold rounded-none
              border-l border-[#2A2A2A]
              disabled:opacity-50 disabled:cursor-not-allowed
              hover:bg-[#272727] hover:rounded
            "
          >
            +
          </button>
        </div>
      </td>
    </tr>
  );
}

=== ./components/ProductCard/AddToCartButton.jsx ===
// src/components/AddToCartButton.jsx
"use client";

import React, { useState } from "react";
import { ShoppingCart } from "lucide-react";
import CartChangeToast from "../CartChangeToast";

export default function AddToCartButton({ onClick, disabled }) {
  const [toast, setToast] = useState(null);

  const handleClick = () => {
    if (disabled) {
      setToast({ message: "Selecione algum produto!", type: "alert" });
      return;
    }
    if (onClick) onClick();
    setToast({ message: "Produto adicionado ao carrinho!", type: "success" });
  };

  return (
    <>
      <button
        type="button"
        onClick={handleClick}
        className={`
          mt-auto py-2 sm:py-3 px-3 sm:px-6
          bg-gradient-to-r from-[#D4AF37] to-[#A8760B]
          hover:from-[#CFAF37] hover:to-[#B8860B]
          text-[#1a1a1a] font-semibold rounded-xl shadow-md
          transition flex items-center justify-center space-x-2
          text-base sm:text-lg font-bold
          ${disabled ? "cursor-default" : "cursor-pointer"}
        `}
      >
        <ShoppingCart className="h-6 w-6" />
        <span>Adicionar ao carrinho</span>
      </button>

      {toast && (
        <CartChangeToast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </>
  );
}

=== ./components/CategoryCarousel/CategoryTitle.jsx ===
"use client";
import React, { useEffect, useRef } from "react";
import { Stardos_Stencil } from "next/font/google";
import { Anton } from "next/font/google";

const anton = Anton({ weight: "400", subsets: ["latin"] });
const stencil = Stardos_Stencil({ subsets: ["latin"], weight: "700" });

export default function CategoryTitle({
  categories,
  selectedCategory,
  onSelectCategory,
}) {
  const containerRef = useRef(null);
  const itemsRef = useRef([]);

  useEffect(() => {
    const c = containerRef.current;
    if (!c) return;
    c.style.scrollBehavior = "smooth";
    c.style.msOverflowStyle = "none";
    c.style.scrollbarWidth = "none";
  }, []);

  useEffect(() => {
    const c = containerRef.current;
    const idx = categories.indexOf(selectedCategory);
    const item = itemsRef.current[idx];
    if (c && item) {
      const cr = c.getBoundingClientRect();
      const ir = item.getBoundingClientRect();
      const offset = ir.left - cr.left - (cr.width / 2 - ir.width / 2);
      c.scrollBy({ left: offset, behavior: "smooth" });
    }
  }, [selectedCategory, categories]);

  const handleWheel = (e) => {
    e.preventDefault();
    containerRef.current?.scrollBy({ left: e.deltaY, behavior: "smooth" });
  };

  const handleKeyDown = (e) => {
    const idx = categories.indexOf(selectedCategory);
    if (e.key === "ArrowRight" && idx < categories.length - 1) {
      onSelectCategory(categories[idx + 1]);
    } else if (e.key === "ArrowLeft" && idx > 0) {
      onSelectCategory(categories[idx - 1]);
    }
  };

  return (
    <div className="flex flex-col items-center bg-[#1a1a1a] border-b  border-[#3A3A3A] pt-12 pb-8 select-none">
      {/* TÃ­tulo com degradÃª e contorno */}
      <h2
        className={`text-6xl ${anton.className} uppercase mb-6 pt-3 pb-3 text-[#fafafa] tracking-wide text-center`}
        style={{
          textShadow: `
      1px 5px 2px rgba(0,0,0,0.7),
      -1px 0 1px rgba(255,255,255,0.4),
      0 0 50px rgba(255,255,255,0.05)
    `,
        }}
      >
        CATÃLOGO
        <br />
        <span className="block text-3xl text-[#D4AF37] font-normal tracking-normal leading-tight mt-1">
          2025
        </span>
      </h2>

      <div
        ref={containerRef}
        tabIndex={0}
        onWheel={handleWheel}
        onKeyDown={handleKeyDown}
        className="flex space-x-3 overflow-x-auto w-full px-4"
        style={{
          scrollbarWidth: "none",
          msOverflowStyle: "none",
        }}
      >
        {categories.map((cat, i) => {
          const isActive = cat === selectedCategory;
          return (
            <div
              key={cat}
              ref={(el) => (itemsRef.current[i] = el)}
              className={`relative flex-shrink-0 cursor-pointer transition-all duration-300 rounded-md min-w-[12rem] sm:min-w-[14rem] md:min-w-[15rem] ${
                isActive
                  ? "scale-100 opacity-90"
                  : "scale-95 opacity-75 hover:scale-100 hover:opacity-85"
              }`}
              onClick={() => onSelectCategory(cat)}
            >
              {/* Camada metÃ¡lica com efeito 3D */}
              <div
                className={`absolute inset-0 rounded-xl ${
                  isActive ? "brightness-110" : ""
                }`}
                style={{
                  backgroundImage: `
                    linear-gradient(145deg, #d0d0d0, #909090),
                    repeating-linear-gradient(
                      45deg,
                      #c0c0c0 0px,
                      #e0e0e0 2px,
                      #c0c0c0 4px
                    )
                  `,
                  backgroundBlendMode: "overlay",
                  backgroundSize: "cover",
                  boxShadow: `
                    inset 2px 2px 5px rgba(255,255,255,0.5),
                    inset -2px -2px 5px rgba(0,0,0,5),
                    2px 2px 8px rgba(0,0,0,0.5)
                  `,
                }}
              />

              {/* ConteÃºdo do botÃ£o */}
              <div
                className={`relative z-10 px-6 py-3 border-3 text-center rounded-xl border transition-all duration-200 ${
                  isActive
                    ? "border-[#D4AF37] shadow-[0_0_10px_rgba(255,255,255,0.3)]"
                    : "border-[#ffffff]"
                } hover:shadow-[0_0_8px_rgba(255,255,255,0.2)]`}
              >
                <h2
                  className={`${stencil.className} text-base sm:text-lg md:text-xl uppercase font-extrabold text-transparent bg-clip-text`}
                  style={{
                    backgroundImage: `
                      repeating-linear-gradient(
                        135deg,
                        #a0a0a0 0px,
                        #d0d0d0 1px,
                        #a0a0a0 2px
                      ),
                      linear-gradient(135deg, rgba(2, 2, 2, 0.5), rgba(0,0,0,0.1))
                    `,
                    backgroundBlendMode: "overlay",
                    backgroundSize: "100% 2px, 200% 200%",
                  }}
                >
                  {cat}
                </h2>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

=== ./components/NotificationDialog.jsx ===
// src/components/NotificationDialog.jsx
"use client";

import React from "react";
import { createPortal } from "react-dom";
import { X } from "lucide-react";

export default function NotificationDialog({ notifications, clear }) {
  if (!notifications.length) return null;

  return createPortal(
    <div className="fixed bottom-20 w-80 left-1/2 transform -translate-x-1/2 z-50">
      <div className="max-w-md bg-[#1A1A1A]/70 backdrop-blur-lg text-white rounded-lg border border-white/20 shadow-lg overflow-hidden">
        {/* CabeÃ§alho fixo */}
        <div className="flex items-center justify-between px-4 py-2 border-b border-white/20">
          <span className="text-[1rem] font-semibold">
            âš ï¸ &nbsp;Pedido MÃ­nimo
          </span>
          <button onClick={clear} aria-label="Fechar" className="p-1">
            <X className="cursor-pointer h-6 w-6" />
          </button>
        </div>

        {/* Lista completa sempre visÃ­vel */}
        <div className="px-4 py-2 space-y-1 text-xs">
          {notifications.map((n, index) => (
            <div key={`${n.id}-${index}`} className="flex items-start">
              <span className="mr-2">â€¢</span>
              <span className="flex-1">{n.text}</span>
            </div>
          ))}
          <div className="mt-2 text-yellow-300">
            * Apenas o material conta. Modelo nÃ£o interfere.
          </div>
        </div>
      </div>
    </div>,
    document.body
  );
}

=== ./components/FloatingCheckoutButton.jsx ===
// src/components/FloatingCheckoutButton.jsx
"use client";

import React, { useEffect, useState } from "react";
import { useRouter } from "next/navigation";
import { useCart } from "@/context/CartContext";
import { useNotifications } from "@/hooks/useNotifications";
import NotificationDialog from "./NotificationDialog";

export default function FloatingCheckoutButton() {
  const router = useRouter();
  const { items } = useCart();
  const {
    list: notifications,
    add: addNotification,
    clear: clearNotifications,
  } = useNotifications(7);

  // Visibilidade do botÃ£o
  const [visible, setVisible] = useState(false);
  useEffect(() => {
    setVisible(items.length > 0);
  }, [items.length]);

  // Agrupa quantidade por material (usado na validaÃ§Ã£o)
  const totalsByMaterial = items.reduce((acc, item) => {
    acc[item.material] = (acc[item.material] || 0) + item.quantity;
    return acc;
  }, {});

  const handleCheckout = () => {
    clearNotifications();

    const shortages = Object.entries(totalsByMaterial)
      .filter(([_, qty]) => qty < 5)
      .map(([material, qty]) => ({ material, missing: 5 - qty }));

    if (shortages.length === 0) {
      router.push("/checkout");
    } else {
      shortages.forEach(({ material, missing }) =>
        addNotification(
          <>
            <div className="text-[0.9rem]">
              <span className="text-[#dadada]">
                Falta{missing > 1 ? "m" : ""}
              </span>{" "}
              <span className="font-bold">{missing}</span>{" "}
              <span className="text-[#dadada]">
                unidade
                {missing > 1 ? "s" : ""} de
              </span>{" "}
              <span className="font-bold">{material}</span>
            </div>
          </>
        )
      );
    }
  };

  useEffect(() => {
    if (notifications.length > 0) {
      clearNotifications();

      const shortages = Object.entries(totalsByMaterial)
        .filter(([_, qty]) => qty < 5)
        .map(([material, qty]) => ({ material, missing: 5 - qty }));

      shortages.forEach(({ material, missing }) =>
        addNotification(
          <>
            <div className="text-[0.9rem]">
              <span className="text-[#dadada]">
                Falta{missing > 1 ? "m" : ""}
              </span>{" "}
              <span className="font-bold">{missing}</span>{" "}
              <span className="text-[#dadada]">
                unidade
                {missing > 1 ? "s" : ""} de
              </span>{" "}
              <span className="font-bold">{material}</span>
            </div>
          </>
        )
      );
    }
  }, [items, clearNotifications, addNotification, notifications.length]);

  return (
    <>
      <div
        className={`
          fixed bottom-0 left-0 right-0
          grid grid-cols-12 items-center
          bg-[#1A1A1A]/70 backdrop-blur-lg
          h-[9vh]
          border-t border-white/10
          px-[3vh] py-[0] z-50
          transform transition-transform duration-500 ease-out
          ${visible ? "translate-y-0" : "translate-y-full"}
        `}
      >
        <div className="col-span-12 flex justify-center select-none">
          <button
            onClick={handleCheckout}
            className="
              bg-gradient-to-r from-[#0a0a0a] to-[#2a2a2a]
              hover:from-[#0a0a0a] hover:to-[#4a4a4a]
              text-[#D4AF37] text-[3vh] font-semibold
              py-[1vh] px-[4vh] rounded-[1.5vh] w-[40vh]
              cursor-pointer
              shadow-[0_0_0.4vh_#A8760B] hover:shadow-[0_0_2vh_#A8760B]
              transform transition-all duration-200
              hover:-translate-y-[0.05vh] active:translate-y-[0.05vh] active:scale-95
            "
            aria-label="Finalizar Pedido"
          >
            ğŸ”ª Finalizar Pedido!
          </button>
        </div>
      </div>

      <NotificationDialog
        notifications={notifications}
        clear={clearNotifications}
      />
    </>
  );
}

=== ./components/CartDrawer.jsx ===
"use client";

import React, { useState } from "react";
import { useRouter } from "next/navigation";
import SimpleBar from "simplebar-react";
import "simplebar-react/dist/simplebar.min.css";
import { X } from "lucide-react";
import { useCart } from "@/context/CartContext";
import CartChangeToast from "./CartChangeToast";

export default function CartDrawer({ isOpen, onClose }) {
  const router = useRouter();
  const { items, removeItem } = useCart();
  const [toast, setToast] = useState(null);

  // calcula subtotal
  const subtotal = items.reduce((sum, i) => sum + i.price * i.quantity, 0);

  const handleRemove = (sku) => {
    removeItem(sku);
    setToast({ message: "Produto removido do carrinho!", type: "error" });
  };

  return (
    <div
      className={`z-40 fixed inset-0 ${isOpen ? "" : "pointer-events-none"}`}
      onClick={onClose}
    >
      <style jsx global>{`
        .cart-scrollbar .simplebar-track.simplebar-vertical {
          right: auto !important;
          left: 0 !important;
        }
      `}</style>

      <aside
        onClick={(e) => e.stopPropagation()}
        className={`
          fixed top-[8vh] right-0
          h-[100%] w-65 min-w-[40vh] max-w-[10rem]
          bg-[#1A1A1A]/70 backdrop-blur-lg
          border-l border-white/10
          origin-right transform transition-transform duration-350 md:top-[10vh] min-w-[40vh]
          ${isOpen ? "translate-x-0" : "translate-x-full"}
        `}
      >
        {/* BotÃ£o de fechar */}
        <button
          onClick={onClose}
          aria-label="Fechar carrinho"
          className="z-50 cursor-pointer absolute top-[1vh] left-[1vh] text-white text-[4vh] focus:outline-none"
        >
          Ã—
        </button>
        {/* ConteÃºdo rolÃ¡vel com classe especÃ­fica */}
        <SimpleBar
          style={{ maxHeight: "100%" }}
          className="mt-[6vh] pl-[0.5vh] pb-[40vh] cart-scrollbar"
        >
          {items.length === 0 ? (
            <p className="pl-[3vh] pt-[3vh] text-[3.5vh] text-[#dadada]">
              Carrinho vazio.
            </p>
          ) : (
            <ul>
              {items.map((i, idx) => (
                <li
                  key={i.sku}
                  className={`
                    flex items-center justify-between px-[1vh] py-[0.5vh]
                    border-b border-[#60606070]
                    ${idx === items.length - 1 ? "border-none" : ""}
                  `}
                >
                  <img
                    src={i.image}
                    alt={i.title}
                    className="h-[5.5vh] w-auto object-contain rounded"
                  />
                  <div className="flex-1 ml-[2.1vh]">
                    <div className="font-semibold text-[2.3vh] text-white">
                      {i.title}
                    </div>
                    <div className="text-[2.1vh] text-[#DADADA]">
                      {i.material}
                    </div>
                    <div className="text-[2vh] text-white mt-[0.5vh]">
                      x{i.quantity} Â· R$ {(i.price * i.quantity).toFixed(2)}
                    </div>
                  </div>
                  <button
                    onClick={() => handleRemove(i.sku)}
                    aria-label="Remover item"
                    className="text-red-400 hover:text-red-500/80 p-1 cursor-pointer"
                  >
                    <X className="h-[auto] w-[2.5vh]" />
                  </button>
                </li>
              ))}
            </ul>
          )}
        </SimpleBar>

        {items.length > 0 && (
          <div className="fixed pb-[22vh] bottom-0 left-0 w-full p-[2vh] bg-[#1A1A1A]/90 backdrop-blur-md z-60 border-t border-white/20">
            <div className="flex justify-between items-center text-[3vh] font-semibold text-white">
              <span>Subtotal:</span>
              <span>R$ {subtotal.toFixed(2)}</span>
            </div>
          </div>
        )}
      </aside>

      {toast && (
        <CartChangeToast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
}

=== ./components/CartChangeToast.jsx ===
// src/components/CartChangeToast.jsx
"use client";

import React, { useEffect } from "react";
import { createPortal } from "react-dom";

export default function CartChangeToast({
  message,
  type = "success",
  onClose,
}) {
  // fecha automaticamente apÃ³s 2s
  useEffect(() => {
    const t = setTimeout(onClose, 2000);
    return () => clearTimeout(t);
  }, [onClose]);

  // cores suaves
  const bgClass =
    type === "success"
      ? "bg-black/75 backdrop-blur-lg border-green-400/20 text-green-400/80"
      : type === "error"
        ? "bg-black/75 backdrop-blur-lg border-red-400/20 text-red-400/80"
        : "bg-black/75 backdrop-blur-lg border-yellow-400/20 text-yellow-400/85";

  return createPortal(
    <div className="fixed top-20 w-80 left-1/2 transform -translate-x-1/2 z-50">
      <div
        className={`
          max-w-md
          ${bgClass}
          backdrop-blur-lg
          rounded-lg
          border
          px-4 py-2
          shadow-lg
          text-center
          font-medium
        `}
      >
        {message}
      </div>
    </div>,
    document.body
  );
}

=== ./components/CheckoutLayout/CheckoutLayout.jsx ===
// src/components/CheckoutLayout.jsx

"use client";
import React from "react";
import Link from "next/link";
import { ArrowLeft } from "lucide-react";
import ProductSummary from "./ProductSummary";
import CustomerInfoForm from "./CustomerInfoForm";

export default function CheckoutLayout({
  items,
  total,
  customer,
  email,
  phone,
  loading,
  onCustomerChange,
  onEmailChange,
  onPhoneChange,
  onSubmit,
}) {
  return (
    <div className="min-h-screen bg-[#202020] text-white font-roboto antialiased">
      {/* Header fixo */}
      <header className="fixed top-0 left-0 right-0 px-4 py-3 grid grid-cols-12 items-center bg-[rgba(26,26,26,0.7)] backdrop-blur-lg z-30 border-b border-white/20">
        <div className="col-span-2 flex items-center">
          <Link
            href="/"
            aria-label="Voltar ao catÃ¡logo"
            className="flex items-center"
          >
            <ArrowLeft className="h-6 w-6 text-white mr-1" />
            <span className="text-white text-base font-bold">CatÃ¡logo</span>
          </Link>
        </div>
        <div className="col-span-8 text-center">
          <img
            src="/logo.png"
            alt="Logo do site"
            className="h-14 w-auto inline-block"
          />
        </div>
      </header>

      {/* ConteÃºdo principal */}
      <main className="pt-30 pb-10 px-4 max-w-6xl mx-auto space-y-12 backdrop-blur-sm bg-[#252525] bg-opacity-90 min-h-[100vh] md:w-120">
        <ProductSummary items={items} total={total} />

        <CustomerInfoForm
          customer={customer}
          email={email}
          phone={phone}
          loading={loading}
          disableSubmit={items.length === 0}
          onCustomerChange={onCustomerChange}
          onEmailChange={onEmailChange}
          onPhoneChange={onPhoneChange}
          onSubmit={onSubmit}
        />
      </main>
    </div>
  );
}

=== ./components/CheckoutLayout/CustomerInfoForm.jsx ===
import React, { useState, useRef, useEffect } from "react";
import { useCart } from "@/context/CartContext";
import Script from "next/script";

import InputField from "./InputField";
import AddressSection from "./AddressSection";
import {
  initPhoneInput,
  validatePhoneBR,
} from "@/components/CheckoutLayout/utils/phoneUtils";
import { validateEmail } from "@/components/CheckoutLayout/utils/emailUtils";
import { fetchAddressByCEP } from "@/components/CheckoutLayout/utils/cepUtils";

export default function CustomerInfoForm({
  customer,
  email,
  phone,
  loading,
  onCustomerChange,
  onEmailChange,
  onPhoneChange,
  onSubmit,
}) {
  const { items } = useCart();
  const phoneRef = useRef(null);

  const [cep, setCep] = useState("");
  const [address, setAddress] = useState({
    street: "",
    neighborhood: "",
    city: "",
    state: "",
  });
  const [loadingCep, setLoadingCep] = useState(false);
  const [number, setNumber] = useState("");
  const [complement, setComplement] = useState("");
  const [phoneValid, setPhoneValid] = useState(null);
  const [cepValid, setCepValid] = useState(null);

  useEffect(() => {
    const value = phoneRef.current?.value || "";
    setPhoneValid(validatePhoneBR(value).valid);
  }, [phone]);

  useEffect(() => {
    if (!phoneRef.current) return;
    const cleanup = initPhoneInput(phoneRef, onPhoneChange);
    return cleanup;
  }, [onPhoneChange]);

  useEffect(() => {
    const sanitized = cep.replace(/\D/g, "");
    if (sanitized.length < 8) {
      setCepValid(false);
      return;
    }
    setLoadingCep(true);
    fetchAddressByCEP(sanitized)
      .then((res) => {
        setAddress(res);
        setCepValid(true);
      })
      .catch((err) => {
        alert(err.message);
        setAddress({ street: "", neighborhood: "", city: "", state: "" });
        setCepValid(false);
      })
      .finally(() => setLoadingCep(false));
  }, [cep]);

  const handleFormSubmit = (e) => {
    e.preventDefault();
    const trimmedName = customer.trim();
    if (trimmedName.length < 2) {
      alert("Nome deve ter pelo menos 2 letras.");
      return;
    }
    if (number.trim() === "") {
      alert("NÃºmero do endereÃ§o nÃ£o pode ficar em branco.");
      return;
    }
    const emailCheck = validateEmail(email);
    if (!emailCheck.valid) {
      alert(emailCheck.reason);
      return;
    }
    const phoneVal = validatePhoneBR(phoneRef.current.value);
    if (!phoneVal.valid) {
      alert(phoneVal.reason);
      return;
    }
    const sanitizedCep = cep.replace(/\D/g, "");
    if (sanitizedCep.length !== 8) {
      alert("CEP deve conter 8 dÃ­gitos.");
      return;
    }
    if (!address.street) {
      alert("EndereÃ§o invÃ¡lido ou CEP nÃ£o encontrado.");
      return;
    }

    onPhoneChange(phoneVal.e164);

    onSubmit({
      customer,
      email,
      phone: phoneVal.e164,
      address: {
        street: address.street,
        neighborhood: address.neighborhood,
        city: address.city,
        state: address.state,
        number, // <â€“â€“ aqui
        complement, // <â€“â€“ e aqui
      },
      cartItems: items,
    });
  };

  return (
    <section className="bg-[#1E1E1E] bg-opacity-90 p-6 rounded-2xl border border-[#2A2A2A] shadow-inner">
      <Script
        src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
        strategy="afterInteractive"
      />
      <h2 className="uppercase tracking-wide text-2xl mb-4 text-[#DDDDDD]">
        InformaÃ§Ãµes
      </h2>
      <form noValidate onSubmit={handleFormSubmit} className="space-y-6">
        <InputField
          label="Nome/Empresa"
          type="text"
          name="name"
          autoComplete="name"
          value={customer}
          onChange={(e) => onCustomerChange(e.target.value)}
          isValid={customer.trim().length >= 2}
          required
          minLength={2}
          placeholder="JoÃ£o da Silva / Empresa XYZ"
        />
        <InputField
          label="E-mail"
          type="email"
          name="email"
          autoComplete="email"
          value={email}
          onChange={(e) => onEmailChange(e.target.value)}
          isValid={validateEmail(email).valid}
          required
          placeholder="joao@gmail.com"
        />

        <AddressSection
          cep={cep}
          setCep={setCep}
          cepValid={cepValid}
          loadingCep={loadingCep}
          address={address}
          number={number}
          setNumber={setNumber}
          complement={complement}
          setComplement={setComplement}
        />

        <InputField
          label="Celular"
          ref={phoneRef}
          type="tel"
          autoComplete="tel"
          defaultValue={phone}
          onChange={() => {}}
          isValid={phoneValid}
          required
          placeholder="(00) 00000-0000"
        />
        <button
          type="submit"
          disabled={loading}
          className="w-full py-3 text-lg font-semibold rounded-xl bg-gradient-to-r from-[#CFAF37] to-[#A8760B] hover:from-[#D4AF37] hover:to-[#B8860B] disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed"
        >
          {loading
            ? "Enviandoâ€¦"
            : loadingCep
              ? "Buscando CEPâ€¦"
              : "Finalizar Pedido"}
        </button>
      </form>
    </section>
  );
}

=== ./components/CheckoutLayout/ProductSummary.jsx ===
// src/components/ProductSummary.jsx
// Exibe lista de itens, totais e botÃµes de remoÃ§Ã£o

import React from "react";
import { X } from "lucide-react";
import { useCart } from "@/context/CartContext";

export default function ProductSummary({ items, total }) {
  const { removeItem } = useCart();

  return (
    <section>
      <h1 className="uppercase tracking-wide text-3xl mb-6 text-[#DDDDDD] text-center">
        Resumo do Pedido
      </h1>

      {items.length === 0 ? (
        <p className="text-base text-[#AAAAAA]">Seu carrinho estÃ¡ vazio.</p>
      ) : (
        <ul>
          {items.map((i, idx) => (
            <li
              key={i.sku}
              className={`flex items-center justify-between p-4 rounded-lg ${
                idx % 2 === 0 ? "bg-[#1E1E1E]" : "bg-[#2A2A2A]"
              }`}
            >
              <img
                src={i.image}
                alt={i.title}
                className="h-12 w-auto object-contain rounded-md"
              />
              <div className="flex-1 ml-4">
                <div className="font-semibold text-base text-white">
                  {i.title}
                </div>
                <div className="text-sm text-[#B3B3B3]">{i.material}</div>
              </div>
              <div className="w-12 text-center text-white font-medium">
                {i.quantity}
              </div>
              <div className="w-24 text-right text-white font-medium">
                R$ {(i.price * i.quantity).toFixed(2)}
              </div>
              <button
                onClick={() => removeItem(i.sku)}
                aria-label="Remover item"
                className="ml-4 text-red-400 hover:text-red-600 p-1"
              >
                <X className="h-5 w-5" />
              </button>
            </li>
          ))}

          <li className="flex justify-between items-center mt-4 pt-4 border-t border-[rgba(255,255,255,0.3)]">
            <span className="font-semibold text-lg text-white">Total</span>
            <span className="font-semibold text-lg text-white">
              R$ {total.toFixed(2)}
            </span>
          </li>
        </ul>
      )}
    </section>
  );
}

=== ./components/CheckoutLayout/AddressSection.jsx ===
import React from "react";
import InputField from "./InputField";

export default function AddressSection({
  cep,
  setCep,
  cepValid,
  loadingCep,
  address,
  number,
  setNumber,
  complement,
  setComplement,
}) {
  return (
    <>
      <InputField
        label="CEP"
        type="text"
        name="postal-code"
        autoComplete="postal-code"
        value={cep.replace(/(\d{5})(\d{1,3})?/, (_, p1, p2) =>
          p2 ? `${p1}-${p2}` : p1
        )}
        onChange={(e) => setCep(e.target.value.replace(/\D/g, "").slice(0, 8))}
        isValid={cepValid}
        required
        maxLength={9}
        pattern="[0-9]{5}-[0-9]{3}"
        title="Digite um CEP no formato 00000-000"
        placeholder="00000-000"
      />

      {address.street && (
        <>
          <InputField
            label="Rua"
            value={address.street}
            readOnly
            className="text-[#bbb] font-bold pointer-events-none"
          />
          <InputField
            label="Bairro"
            value={address.neighborhood}
            readOnly
            className="text-[#AAAAAA] font-bold pointer-events-none"
          />
          <div className="grid grid-cols-2 gap-4">
            <InputField
              label="Cidade"
              value={address.city}
              readOnly
              className="text-[#AAAAAA] font-bold pointer-events-none"
            />
            <InputField
              label="UF"
              value={address.state}
              readOnly
              className="text-[#AAAAAA] font-bold pointer-events-none"
            />
          </div>
          <div className="grid grid-cols-2 gap-4">
            <InputField
              label="NÃºmero"
              type="text"
              value={number}
              onChange={(e) => setNumber(e.target.value)}
              isValid={number.trim().length > 0}
              required
              placeholder="99"
            />
            <InputField
              label="Complemento"
              type="text"
              value={complement}
              onChange={(e) => setComplement(e.target.value)}
              showAsterisk={false}
              placeholder="PavilhÃ£o Esquina"
            />
          </div>
        </>
      )}
    </>
  );
}

=== ./components/CheckoutLayout/InputField.jsx ===
import React, { useState, forwardRef } from "react";

const InputField = forwardRef(
  (
    {
      label,
      value,
      onChange,
      showAsterisk = true,
      isValid = null, // true | false | null (sem validaÃ§Ã£o)
      className = "",
      ...props
    },
    ref
  ) => {
    const [touched, setTouched] = useState(false);
    const [focused, setFocused] = useState(false);

    const handleFocus = () => setFocused(true);
    const handleBlur = () => {
      setFocused(false);
      setTouched(true);
    };

    const baseClasses =
      "w-full p-3 rounded-xl focus:ring-2 focus:ring-[#D4AF37] placeholder-gray-400/13";
    const defaultState = "bg-[#1A1A1A] text-white border border-[#2A2A2A]";
    const validState =
      "bg-green-300/5 text-[#bbb] font-bold border border-green-500/20";
    const invalidState = "bg-red-300/5 border border-red-500/40";

    let stateClasses = defaultState;
    if (touched && !focused && isValid !== null) {
      stateClasses = isValid ? validState : invalidState;
    }

    return (
      <div>
        <label
          className={`block mb-2 text-sm text-[#DADADA] font-bold ${
            showAsterisk
              ? "after:content-['*'] after:ml-1 after:text-red-500/30"
              : "after:content-['(opcional)'] after:ml-1 after:text-[0.75rem] after:text-[#DADADA]/35"
          }`}
        >
          {label}
        </label>
        <input
          ref={ref}
          value={value}
          onChange={onChange}
          onFocus={handleFocus}
          onBlur={handleBlur}
          className={`${baseClasses} ${stateClasses} ${className}`}
          {...props}
        />
      </div>
    );
  }
);

export default InputField;

=== ./context/CartContext.jsx ===
// src/context/CartContext.jsx
"use client";
import React, { createContext, useReducer, useContext, useEffect } from "react";

const CartContext = createContext();

const initialState = { items: [] };

function cartReducer(state, action) {
  switch (action.type) {
    case "INIT":
      return action.payload;
    case "ADD_ITEM": {
      const { sku, quantity, ...rest } = action.payload;
      const exists = state.items.find((item) => item.sku === sku);
      if (exists) {
        return {
          items: state.items.map((item) =>
            item.sku === sku
              ? { ...item, quantity: item.quantity + quantity }
              : item
          ),
        };
      }
      return { items: [...state.items, { sku, quantity, ...rest }] };
    }
    case "REMOVE_ITEM":
      return {
        items: state.items.filter((item) => item.sku !== action.payload.sku),
      };
    case "CLEAR_CART":
      return { items: [] };
    default:
      return state;
  }
}

export function CartProvider({ children }) {
  const [state, dispatch] = useReducer(cartReducer, initialState);

  // inicializa do localStorage
  useEffect(() => {
    const stored = localStorage.getItem("cart");
    if (stored) dispatch({ type: "INIT", payload: JSON.parse(stored) });
  }, []);

  // persiste no localStorage
  useEffect(() => {
    localStorage.setItem("cart", JSON.stringify(state));
  }, [state]);

  const addItem = (item) => dispatch({ type: "ADD_ITEM", payload: item });
  const removeItem = (sku) =>
    dispatch({ type: "REMOVE_ITEM", payload: { sku } });
  const clearCart = () => dispatch({ type: "CLEAR_CART" });

  // Calcular o total dos itens
  const total = state.items.reduce(
    (acc, item) => acc + item.price * item.quantity,
    0
  );

  return (
    <CartContext.Provider
      value={{ items: state.items, addItem, removeItem, clearCart, total }} // Total Ã© agora acessÃ­vel diretamente
    >
      {children}
    </CartContext.Provider>
  );
}

export function useCart() {
  return useContext(CartContext);
}

=== ./context/NotificationsContext.jsx ===
// src/context/NotificationsContext.jsx
"use client";

import React, { createContext, useContext, useState } from "react";

const NotificationsContext = createContext();

export function NotificationsProvider({ children }) {
  const [notifications, setNotifications] = useState([]);

  const addNotification = (text) =>
    setNotifications((prev) => [...prev, { id: Date.now(), text }]);

  const clearNotifications = () => setNotifications([]);

  return (
    <NotificationsContext.Provider
      value={{ notifications, addNotification, clearNotifications }}
    >
      {children}
    </NotificationsContext.Provider>
  );
}

export const useNotifications = () => useContext(NotificationsContext);


=== /home/ikemh/projetos/my-ecommerce/frontend/src/todos_codigos.txt ===

